{% extends "base.html" %}

{% block title %}Agent 设置 - iDOC{% endblock %}

{% block extra_css %}
<style>
    body {
        background-color: #f5f8fa;
        min-height: 100vh;
        font-family: 'Inter', sans-serif;
    }
    
    .dashboard-layout {
        display: flex;
        min-height: calc(100vh - 1rem);
    }
    
    .sidebar {
        width: 250px;
        background-color: #fff;
        border-right: 1px solid #e5e9f2;
        box-shadow: 0 0 15px rgba(0, 0, 0, 0.05);
        position: fixed;
        height: 100vh;
        z-index: 1000;
    }
    
    .sidebar-brand {
        padding: 1.5rem;
        border-bottom: 1px solid #e5e9f2;
    }
    
    .sidebar-brand a {
        display: flex;
        align-items: center;
        text-decoration: none;
        color: inherit;
    }
    
    .sidebar-brand-icon {
        width: 36px;
        height: 36px;
        display: flex;
        align-items: center;
        justify-content: center;
        margin-right: 0.75rem;
    }
    
    .sidebar-brand-icon img {
        max-width: 100%;
        max-height: 100%;
    }
    
    .sidebar-brand-text {
        display: flex;
        flex-direction: column;
    }
    
    .sidebar-brand-text img {
        height: 20px;
        margin-bottom: 0.25rem;
    }
    
    .sidebar-brand-text span {
        font-size: 0.75rem;
        color: #6c757d;
    }
    
    .sidebar-nav {
        padding: 1.5rem 0;
        overflow-y: auto;
        height: calc(100vh - 85px);
    }
    
    .nav-section {
        padding: 0.75rem 1.5rem;
        font-size: 0.75rem;
        font-weight: 600;
        text-transform: uppercase;
        color: #6c757d;
        margin-top: 0.5rem;
    }
    
    .nav-item {
        padding: 0.75rem 1.5rem;
        display: flex;
        align-items: center;
        color: #495057;
        text-decoration: none;
        transition: all 0.2s ease;
        cursor: pointer;
    }
    
    .nav-item:hover {
        background-color: rgba(74, 108, 247, 0.05);
        color: #4A6CF7;
    }
    
    .nav-item.active {
        background-color: rgba(74, 108, 247, 0.1);
        color: #4A6CF7;
        font-weight: 500;
    }
    
    .nav-item i {
        margin-right: 0.75rem;
        width: 20px;
        text-align: center;
    }
    
    .main-content {
        flex: 1;
        margin-left: 250px;
        padding: 2rem;
    }
    
    .content-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 2rem;
    }
    
    .page-title {
        margin: 0;
        font-weight: 600;
    }
    
    .settings-container {
        background-color: #fff;
        border-radius: 12px;
        overflow: hidden;
        box-shadow: 0 0 15px rgba(0, 0, 0, 0.05);
    }
    
    .settings-tabs {
        border-bottom: 1px solid #e5e9f2;
        padding: 0 1rem;
        display: flex;
        overflow-x: auto;
    }
    
    .settings-tab {
        padding: 1rem 1.25rem;
        font-weight: 500;
        color: #6c757d;
        cursor: pointer;
        position: relative;
        white-space: nowrap;
    }
    
    .settings-tab::after {
        content: '';
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        height: 3px;
        background-color: transparent;
        transition: all 0.2s ease;
    }
    
    .settings-tab:hover {
        color: #4A6CF7;
    }
    
    .settings-tab.active {
        color: #4A6CF7;
    }
    
    .settings-tab.active::after {
        background-color: #4A6CF7;
    }
    
    .settings-content {
        padding: 2rem;
    }
    
    .settings-section {
        margin-bottom: 2.5rem;
    }
    
    .settings-section:last-child {
        margin-bottom: 0;
    }
    
    .settings-section-title {
        font-weight: 600;
        margin-bottom: 1.25rem;
        display: flex;
        align-items: center;
    }
    
    .settings-section-title i {
        margin-right: 0.75rem;
        color: #4A6CF7;
    }
    
    .form-group {
        margin-bottom: 1.5rem;
    }
    
    .form-label {
        font-weight: 500;
        margin-bottom: 0.5rem;
    }
    
    .form-text {
        color: #6c757d;
        font-size: 0.875rem;
        margin-top: 0.25rem;
    }
    
    .model-card {
        border: 1px solid #e5e9f2;
        border-radius: 12px;
        padding: 1.5rem;
        margin-bottom: 1.5rem;
        transition: all 0.2s ease;
        cursor: pointer;
    }
    
    .model-card:hover {
        border-color: #4A6CF7;
        box-shadow: 0 0 15px rgba(74, 108, 247, 0.15);
    }
    
    .model-card.active {
        border-color: #4A6CF7;
        background-color: rgba(74, 108, 247, 0.05);
    }
    
    .model-card-header {
        display: flex;
        align-items: center;
        margin-bottom: 1rem;
    }
    
    .model-card-radio {
        margin-right: 1rem;
    }
    
    .model-card-icon {
        width: 48px;
        height: 48px;
        border-radius: 8px;
        background-color: rgba(74, 108, 247, 0.1);
        color: #4A6CF7;
        display: flex;
        align-items: center;
        justify-content: center;
        margin-right: 1rem;
    }
    
    .model-card-info {
        flex: 1;
    }
    
    .model-card-title {
        font-weight: 600;
        margin-bottom: 0.25rem;
    }
    
    .model-card-subtitle {
        color: #6c757d;
        font-size: 0.875rem;
    }
    
    .model-card-badge {
        margin-left: 1rem;
        padding: 0.25rem 0.75rem;
        background-color: rgba(74, 108, 247, 0.1);
        color: #4A6CF7;
        border-radius: 50px;
        font-size: 0.75rem;
        font-weight: 600;
    }
    
    .model-card-body {
        color: #6c757d;
        font-size: 0.9rem;
        margin-bottom: 1rem;
    }
    
    .model-card-footer {
        display: flex;
        justify-content: space-between;
        align-items: center;
    }
    
    .model-card-metrics {
        display: flex;
        gap: 1rem;
    }
    
    .model-card-metric {
        display: flex;
        flex-direction: column;
        align-items: center;
    }
    
    .model-card-metric-value {
        font-weight: 600;
        color: #4A6CF7;
    }
    
    .model-card-metric-label {
        font-size: 0.75rem;
        color: #6c757d;
    }
    
    .behavior-slider {
        margin-bottom: 2rem;
    }
    
    .behavior-slider-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 0.5rem;
    }
    
    .behavior-slider-title {
        font-weight: 500;
    }
    
    .behavior-slider-value {
        font-weight: 600;
        color: #4A6CF7;
    }
    
    .behavior-slider-range {
        display: flex;
        justify-content: space-between;
        margin-top: 0.5rem;
        color: #6c757d;
        font-size: 0.75rem;
    }
    
    .knowledge-item {
        display: flex;
        align-items: center;
        margin-bottom: 1rem;
        padding-bottom: 1rem;
        border-bottom: 1px solid #e5e9f2;
    }
    
    .knowledge-item:last-child {
        margin-bottom: 0;
        padding-bottom: 0;
        border-bottom: none;
    }
    
    .knowledge-item-icon {
        width: 40px;
        height: 40px;
        border-radius: 8px;
        background-color: rgba(74, 108, 247, 0.1);
        color: #4A6CF7;
        display: flex;
        align-items: center;
        justify-content: center;
        margin-right: 1rem;
    }
    
    .knowledge-item-info {
        flex: 1;
    }
    
    .knowledge-item-title {
        font-weight: 500;
        margin-bottom: 0.25rem;
    }
    
    .knowledge-item-description {
        color: #6c757d;
        font-size: 0.875rem;
    }
    
    .knowledge-item-control {
        margin-left: 1rem;
    }
    
    .api-connection {
        border: 1px solid #e5e9f2;
        border-radius: 8px;
        padding: 1.25rem;
        margin-bottom: 1.5rem;
    }
    
    .api-connection-header {
        display: flex;
        align-items: center;
        margin-bottom: 1rem;
    }
    
    .api-connection-icon {
        width: 48px;
        height: 48px;
        border-radius: 8px;
        display: flex;
        align-items: center;
        justify-content: center;
        margin-right: 1rem;
        background-color: #f8f9fa;
    }
    
    .api-connection-info {
        flex: 1;
    }
    
    .api-connection-title {
        font-weight: 500;
        margin-bottom: 0.25rem;
    }
    
    .api-connection-status {
        display: flex;
        align-items: center;
    }
    
    .api-status-connected {
        color: #28a745;
    }
    
    .api-status-disconnected {
        color: #dc3545;
    }
    
    .api-status-icon {
        margin-right: 0.5rem;
    }
    
    .api-connection-action {
        margin-left: 1rem;
    }
    
    .preset-card {
        border: 1px solid #e5e9f2;
        border-radius: 12px;
        overflow: hidden;
        margin-bottom: 1.5rem;
        transition: all 0.2s ease;
    }
    
    .preset-card:hover {
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
    }
    
    .preset-card-header {
        padding: 1.25rem;
        background-color: #f8f9fa;
        display: flex;
        align-items: center;
        justify-content: space-between;
        border-bottom: 1px solid #e5e9f2;
    }
    
    .preset-card-title {
        font-weight: 500;
        display: flex;
        align-items: center;
    }
    
    .preset-card-icon {
        margin-right: 0.75rem;
        color: #4A6CF7;
    }
    
    .preset-card-actions {
        display: flex;
        align-items: center;
    }
    
    .preset-card-action {
        background: none;
        border: none;
        color: #6c757d;
        margin-left: 0.75rem;
        cursor: pointer;
        transition: all 0.2s ease;
    }
    
    .preset-card-action:hover {
        color: #4A6CF7;
    }
    
    .preset-card-body {
        padding: 1.25rem;
    }
    
    .preset-settings-item {
        display: flex;
        justify-content: space-between;
        margin-bottom: 0.75rem;
    }
    
    .preset-settings-item:last-child {
        margin-bottom: 0;
    }
    
    .preset-settings-label {
        color: #6c757d;
    }
    
    .preset-settings-value {
        font-weight: 500;
    }
    
    .custom-range {
        width: 100%;
    }
    
    .feedback-settings {
        margin-bottom: 1.5rem;
    }
    
    .feedback-option {
        display: flex;
        align-items: flex-start;
        margin-bottom: 1rem;
        padding-bottom: 1rem;
        border-bottom: 1px solid #e5e9f2;
    }
    
    .feedback-option:last-child {
        margin-bottom: 0;
        padding-bottom: 0;
        border-bottom: none;
    }
    
    .feedback-option-control {
        margin-right: 1rem;
        margin-top: 0.25rem;
    }
    
    .feedback-option-info {
        flex: 1;
    }
    
    .feedback-option-title {
        font-weight: 500;
        margin-bottom: 0.25rem;
    }
    
    .feedback-option-description {
        color: #6c757d;
        font-size: 0.875rem;
    }
    
    .response-preview {
        background-color: #f8f9fa;
        border-radius: 8px;
        padding: 1.25rem;
        margin-top: 1.5rem;
    }
    
    .response-preview-header {
        display: flex;
        align-items: center;
        margin-bottom: 1rem;
    }
    
    .response-preview-icon {
        width: 32px;
        height: 32px;
        border-radius: 50%;
        background-color: #4A6CF7;
        color: white;
        display: flex;
        align-items: center;
        justify-content: center;
        margin-right: 0.75rem;
    }
    
    .response-preview-title {
        font-weight: 500;
    }
    
    .response-preview-content {
        padding: 1rem;
        background-color: white;
        border-radius: 8px;
        border: 1px solid #e5e9f2;
    }
    
    .token-limit-container {
        margin-top: 1.5rem;
    }
    
    .token-limit-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 0.5rem;
    }
    
    .token-limit-title {
        font-weight: 500;
    }
    
    .token-limit-value {
        font-weight: 600;
        color: #4A6CF7;
    }
    
    .token-limit-description {
        color: #6c757d;
        font-size: 0.875rem;
        margin-bottom: 1rem;
    }
    
    .reset-section {
        margin-top: 2rem;
        padding-top: 2rem;
        border-top: 1px solid #e5e9f2;
    }
    
    @media (max-width: 992px) {
        .main-content {
            margin-left: 64px;
        }
    }
</style>
{% endblock %}

{% block content %}
<div class="dashboard-layout">
    <!-- Sidebar -->
    <div class="sidebar">
        <div class="sidebar-brand">
            <a href="{{ url_for('dashboard') }}">
                <div class="sidebar-brand-icon">
                    <img src="{{ url_for('static', filename='img/logo-icon.svg') }}" alt="Logo Icon" onerror="this.src='{{ url_for('static', filename='img/default-logo.png') }}'">
                </div>
                <div class="sidebar-brand-text">
                    <img src="{{ url_for('static', filename='img/logo-text.svg') }}" alt="Logo Text" onerror="this.src='{{ url_for('static', filename='img/default-logo-text.png') }}'">
                    <span>iDOC</span>
                </div>
            </a>
        </div>
        
        <div class="sidebar-nav">
            <a href="{{ url_for('dashboard') }}" class="nav-item">
                <i class="fas fa-tachometer-alt"></i>
                <span>仪表板</span>
            </a>
            
            <div class="nav-item" data-bs-toggle="collapse" data-bs-target="#collapseKnowledgeBase" aria-expanded="false">
                <i class="fas fa-book"></i>
                <span>企业知识库</span>
                <i class="fas fa-chevron-down ms-auto"></i>
            </div>
            <div class="collapse" id="collapseKnowledgeBase">
                <a href="{{ url_for('knowledge_base') }}" class="nav-item ms-4 py-2">
                    <i class="fas fa-folder-open"></i>
                    <span>所有知识库</span>
                </a>
                <a href="{{ url_for('knowledge_base') }}?action=import" class="nav-item ms-4 py-2">
                    <i class="fas fa-cloud-upload-alt"></i>
                    <span>导入知识</span>
                </a>
                <a href="{{ url_for('knowledge_base') }}?action=settings" class="nav-item ms-4 py-2">
                    <i class="fas fa-cogs"></i>
                    <span>知识库设置</span>
                </a>
            </div>
            
            <div class="nav-item" data-bs-toggle="collapse" data-bs-target="#collapseDocuments" aria-expanded="false">
                <i class="fas fa-file-alt"></i>
                <span>文档管理</span>
                <i class="fas fa-chevron-down ms-auto"></i>
            </div>
            <div class="collapse" id="collapseDocuments">
                <a href="{{ url_for('documents_list') }}?action=upload" class="nav-item ms-4 py-2">
                    <i class="fas fa-file-upload"></i>
                    <span>上传文档</span>
                </a>
                <a href="{{ url_for('documents_list') }}" class="nav-item ms-4 py-2">
                    <i class="fas fa-folder"></i>
                    <span>我的文档</span>
                </a>
                <a href="{{ url_for('documents_list') }}?filter=shared" class="nav-item ms-4 py-2">
                    <i class="fas fa-share-alt"></i>
                    <span>共享文档</span>
                </a>
                <a href="{{ url_for('documents_list') }}?filter=archived" class="nav-item ms-4 py-2">
                    <i class="fas fa-archive"></i>
                    <span>归档文档</span>
                </a>
            </div>
            
            <div class="nav-section">智能工具</div>
            
            <div class="nav-item" data-bs-toggle="collapse" data-bs-target="#collapseWorkflows" aria-expanded="false">
                <i class="fas fa-project-diagram"></i>
                <span>文档解析工作流</span>
                <i class="fas fa-chevron-down ms-auto"></i>
            </div>
            <div class="collapse" id="collapseWorkflows">
                <a href="{{ url_for('workflow_create') }}?action=list" class="nav-item ms-4 py-2">
                    <i class="fas fa-list"></i>
                    <span>工作流列表</span>
                </a>
                <a href="{{ url_for('workflow_create') }}" class="nav-item ms-4 py-2">
                    <i class="fas fa-plus-circle"></i>
                    <span>创建工作流</span>
                </a>
                <a href="{{ url_for('workflow_create') }}?action=history" class="nav-item ms-4 py-2">
                    <i class="fas fa-history"></i>
                    <span>执行历史</span>
                </a>
                <a href="{{ url_for('workflow_create') }}?action=templates" class="nav-item ms-4 py-2">
                    <i class="fas fa-puzzle-piece"></i>
                    <span>模板市场</span>
                </a>
            </div>
            
            <div class="nav-item" data-bs-toggle="collapse" data-bs-target="#collapseAnalysis" aria-expanded="false">
                <i class="fas fa-chart-line"></i>
                <span>AI分析</span>
                <i class="fas fa-chevron-down ms-auto"></i>
            </div>
            <div class="collapse" id="collapseAnalysis">
                <a href="{{ url_for('ai_analysis') }}?type=contract" class="nav-item ms-4 py-2">
                    <i class="fas fa-file-contract"></i>
                    <span>合同分析</span>
                </a>
                <a href="{{ url_for('ai_analysis') }}?type=finance" class="nav-item ms-4 py-2">
                    <i class="fas fa-file-invoice-dollar"></i>
                    <span>财务文档分析</span>
                </a>
                <a href="{{ url_for('ai_analysis') }}?type=medical" class="nav-item ms-4 py-2">
                    <i class="fas fa-file-medical"></i>
                    <span>医疗文档分析</span>
                </a>
                <a href="{{ url_for('ai_analysis') }}" class="nav-item ms-4 py-2">
                    <i class="fas fa-file-alt"></i>
                    <span>通用文档分析</span>
                </a>
            </div>
            
            <div class="nav-item" data-bs-toggle="collapse" data-bs-target="#collapseAgentChat" aria-expanded="false">
                <i class="fas fa-robot"></i>
                <span>Agent Chat</span>
                <i class="fas fa-chevron-down ms-auto"></i>
            </div>
            <div class="collapse" id="collapseAgentChat">
                <a href="{{ url_for('agent_chat') }}" class="nav-item ms-4 py-2">
                    <i class="fas fa-comments"></i>
                    <span>新会话</span>
                </a>
                <a href="{{ url_for('agent_chat') }}?view=history" class="nav-item ms-4 py-2">
                    <i class="fas fa-history"></i>
                    <span>会话历史</span>
                </a>
                <a href="{{ url_for('agent_settings') }}" class="nav-item ms-4 py-2 active">
                    <i class="fas fa-tools"></i>
                    <span>Agent设置</span>
                </a>
            </div>
            
            <div class="nav-section">设置</div>
            <div class="nav-item" data-bs-toggle="collapse" data-bs-target="#collapseSettings" aria-expanded="false">
                <i class="fas fa-user-cog"></i>
                <span>账户</span>
                <i class="fas fa-chevron-down ms-auto"></i>
            </div>
            <div class="collapse" id="collapseSettings">
                <a href="{{ url_for('account_settings') }}" class="nav-item ms-4 py-2">
                    <i class="fas fa-user"></i>
                    <span>个人资料</span>
                </a>
                <a href="{{ url_for('account_settings') }}?tab=security" class="nav-item ms-4 py-2">
                    <i class="fas fa-shield-alt"></i>
                    <span>安全设置</span>
                </a>
                <a href="{{ url_for('notifications') }}" class="nav-item ms-4 py-2">
                    <i class="fas fa-bell"></i>
                    <span>通知中心</span>
                </a>
            </div>
        </div>
    </div>
    
    <!-- Main Content -->
    <div class="main-content">
        <div class="content-header">
            <div>
                <h1 class="page-title">Agent 设置</h1>
                <p class="text-muted">自定义 AI 助手的行为、语言模型和知识库</p>
            </div>
        </div>
        
        <div class="settings-container">
            <div class="settings-tabs">
                <div class="settings-tab active" data-target="models">AI 模型</div>
                <div class="settings-tab" data-target="behavior">行为设置</div>
                <div class="settings-tab" data-target="knowledge">知识库设置</div>
                <div class="settings-tab" data-target="connections">API 连接</div>
                <div class="settings-tab" data-target="presets">预设配置</div>
                <div class="settings-tab" data-target="feedback">反馈与学习</div>
            </div>
            
            <div class="settings-content">
                <!-- AI Models Section -->
                <div class="settings-section" id="modelsSection">
                    <div class="settings-section-title">
                        <i class="fas fa-microchip"></i>
                        AI 模型设置
                    </div>
                    
                    <p class="mb-4">选择 AI 助手使用的模型，不同模型具有不同的能力、速度和成本。</p>
                    
                    <!-- Model Card 1 -->
                    <div class="model-card active">
                        <div class="model-card-header">
                            <input type="radio" name="aiModel" id="claude35" class="model-card-radio" checked>
                            <div class="model-card-icon">
                                <i class="fas fa-robot fa-lg"></i>
                            </div>
                            <div class="model-card-info">
                                <div class="model-card-title">Claude 3.5 Sonnet</div>
                                <div class="model-card-subtitle">平衡性能与成本的多功能模型</div>
                            </div>
                            <div class="model-card-badge">推荐</div>
                        </div>
                        <div class="model-card-body">
                            Claude 3.5 Sonnet 是一款高性能 AI 模型，结合了极强的理解能力、准确的分析和自然的对话风格。性能与 GPT-4 相当，但速度更快、价格更优。特别适合文档分析、抽取信息和多模态任务。
                        </div>
                        <div class="model-card-footer">
                            <div class="model-card-metrics">
                                <div class="model-card-metric">
                                    <div class="model-card-metric-value">200K</div>
                                    <div class="model-card-metric-label">上下文长度</div>
                                </div>
                                <div class="model-card-metric">
                                    <div class="model-card-metric-value">高</div>
                                    <div class="model-card-metric-label">准确性</div>
                                </div>
                                <div class="model-card-metric">
                                    <div class="model-card-metric-value">快</div>
                                    <div class="model-card-metric-label">速度</div>
                                </div>
                                <div class="model-card-metric">
                                    <div class="model-card-metric-value">中</div>
                                    <div class="model-card-metric-label">成本</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Model Card 2 -->
                    <div class="model-card">
                        <div class="model-card-header">
                            <input type="radio" name="aiModel" id="claude3opus" class="model-card-radio">
                            <div class="model-card-icon">
                                <i class="fas fa-brain fa-lg"></i>
                            </div>
                            <div class="model-card-info">
                                <div class="model-card-title">Claude 3 Opus</div>
                                <div class="model-card-subtitle">功能最强大的 Claude 模型</div>
                            </div>
                            <div class="model-card-badge">高级</div>
                        </div>
                        <div class="model-card-body">
                            Claude 3 Opus 是 Anthropic 的旗舰模型，提供最高级的推理、复杂指令处理和深入分析能力。特别适用于法律文档分析、复杂合同审查、学术研究报告和需要高级理解的任务。
                        </div>
                        <div class="model-card-footer">
                            <div class="model-card-metrics">
                                <div class="model-card-metric">
                                    <div class="model-card-metric-value">200K</div>
                                    <div class="model-card-metric-label">上下文长度</div>
                                </div>
                                <div class="model-card-metric">
                                    <div class="model-card-metric-value">最高</div>
                                    <div class="model-card-metric-label">准确性</div>
                                </div>
                                <div class="model-card-metric">
                                    <div class="model-card-metric-value">中</div>
                                    <div class="model-card-metric-label">速度</div>
                                </div>
                                <div class="model-card-metric">
                                    <div class="model-card-metric-value">高</div>
                                    <div class="model-card-metric-label">成本</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Model Card 3 -->
                    <div class="model-card">
                        <div class="model-card-header">
                            <input type="radio" name="aiModel" id="claude3haiku" class="model-card-radio">
                            <div class="model-card-icon">
                                <i class="fas fa-bolt fa-lg"></i>
                            </div>
                            <div class="model-card-info">
                                <div class="model-card-title">Claude 3 Haiku</div>
                                <div class="model-card-subtitle">速度最快的 Claude 模型</div>
                            </div>
                        </div>
                        <div class="model-card-body">
                            Claude 3 Haiku 是一款轻量级、响应速度极快的模型，适合需要实时互动的场景。它能够处理常见的文档分析任务，适合快速提取信息、初步文档分类和简单问答。
                        </div>
                        <div class="model-card-footer">
                            <div class="model-card-metrics">
                                <div class="model-card-metric">
                                    <div class="model-card-metric-value">200K</div>
                                    <div class="model-card-metric-label">上下文长度</div>
                                </div>
                                <div class="model-card-metric">
                                    <div class="model-card-metric-value">中</div>
                                    <div class="model-card-metric-label">准确性</div>
                                </div>
                                <div class="model-card-metric">
                                    <div class="model-card-metric-value">最快</div>
                                    <div class="model-card-metric-label">速度</div>
                                </div>
                                <div class="model-card-metric">
                                    <div class="model-card-metric-value">低</div>
                                    <div class="model-card-metric-label">成本</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="token-limit-container">
                        <div class="token-limit-header">
                            <div class="token-limit-title">模型响应限制</div>
                            <div class="token-limit-value">4,000 tokens</div>
                        </div>
                        <div class="token-limit-description">
                            设置 AI 助手生成响应的最大长度。更短的响应速度更快，更长的响应可以包含更详细的信息。
                        </div>
                        <input type="range" class="custom-range" min="1000" max="10000" step="1000" value="4000" id="tokenLimitSlider">
                        <div class="d-flex justify-content-between mt-2">
                            <small class="text-muted">简短</small>
                            <small class="text-muted">中等</small>
                            <small class="text-muted">详细</small>
                        </div>
                    </div>
                </div>
                
                <!-- Behavior Section (Hidden by default) -->
                <div class="settings-section" id="behaviorSection" style="display: none;">
                    <div class="settings-section-title">
                        <i class="fas fa-sliders-h"></i>
                        行为设置
                    </div>
                    
                    <p class="mb-4">调整 AI 助手的行为模式和输出风格，以适应您的偏好和工作需求。</p>
                    
                    <!-- Behavior Sliders -->
                    <div class="behavior-slider">
                        <div class="behavior-slider-header">
                            <div class="behavior-slider-title">响应详细程度</div>
                            <div class="behavior-slider-value">平衡</div>
                        </div>
                        <input type="range" class="custom-range" min="1" max="5" step="1" value="3" id="detailSlider">
                        <div class="behavior-slider-range">
                            <span>简洁</span>
                            <span>平衡</span>
                            <span>详细</span>
                        </div>
                    </div>
                    
                    <div class="behavior-slider">
                        <div class="behavior-slider-header">
                            <div class="behavior-slider-title">主动性</div>
                            <div class="behavior-slider-value">中度主动</div>
                        </div>
                        <input type="range" class="custom-range" min="1" max="5" step="1" value="4" id="proactiveSlider">
                        <div class="behavior-slider-range">
                            <span>仅回答问题</span>
                            <span>平衡</span>
                            <span>高度主动</span>
                        </div>
                    </div>
                    
                    <div class="behavior-slider">
                        <div class="behavior-slider-header">
                            <div class="behavior-slider-title">思考过程可见度</div>
                            <div class="behavior-slider-value">显示</div>
                        </div>
                        <input type="range" class="custom-range" min="1" max="3" step="1" value="2" id="thinkingSlider">
                        <div class="behavior-slider-range">
                            <span>隐藏</span>
                            <span>仅复杂问题显示</span>
                            <span>总是显示</span>
                        </div>
                    </div>
                    
                    <div class="behavior-slider">
                        <div class="behavior-slider-header">
                            <div class="behavior-slider-title">创造性</div>
                            <div class="behavior-slider-value">平衡</div>
                        </div>
                        <input type="range" class="custom-range" min="1" max="5" step="1" value="3" id="creativitySlider">
                        <div class="behavior-slider-range">
                            <span>保守</span>
                            <span>平衡</span>
                            <span>创新</span>
                        </div>
                    </div>
                    
                    <div class="behavior-slider">
                        <div class="behavior-slider-header">
                            <div class="behavior-slider-title">格式化风格</div>
                            <div class="behavior-slider-value">标准</div>
                        </div>
                        <input type="range" class="custom-range" min="1" max="3" step="1" value="2" id="formattingSlider">
                        <div class="behavior-slider-range">
                            <span>简单</span>
                            <span>标准</span>
                            <span>增强</span>
                        </div>
                    </div>
                    
                    <!-- Behavior Checkboxes -->
                    <div class="mt-5">
                        <h5 class="mb-3">其他行为选项</h5>
                        
                        <div class="form-check mb-3">
                            <input class="form-check-input" type="checkbox" id="showSourcesCheck" checked>
                            <label class="form-check-label" for="showSourcesCheck">
                                显示信息来源
                            </label>
                            <div class="form-text">在回答中显示信息来源和引用，以增加透明度和可信度。</div>
                        </div>
                        
                        <div class="form-check mb-3">
                            <input class="form-check-input" type="checkbox" id="suggestActionsCheck" checked>
                            <label class="form-check-label" for="suggestActionsCheck">
                                主动提供建议
                            </label>
                            <div class="form-text">允许 AI 根据分析结果主动提供可行的后续步骤和建议。</div>
                        </div>
                        
                        <div class="form-check mb-3">
                            <input class="form-check-input" type="checkbox" id="selfCorrectCheck" checked>
                            <label class="form-check-label" for="selfCorrectCheck">
                                自我纠错能力
                            </label>
                            <div class="form-text">允许 AI 检查其回答，在需要时纠正或澄清信息。</div>
                        </div>
                        
                        <div class="form-check mb-3">
                            <input class="form-check-input" type="checkbox" id="technicalDetailsCheck">
                            <label class="form-check-label" for="technicalDetailsCheck">
                                显示技术细节
                            </label>
                            <div class="form-text">在回答中包含更多技术细节和专业信息。</div>
                        </div>
                        
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="followUpQuestionsCheck" checked>
                            <label class="form-check-label" for="followUpQuestionsCheck">
                                提供后续问题建议
                            </label>
                            <div class="form-text">在回答结束时提供相关的后续问题建议。</div>
                        </div>
                    </div>
                    
                    <!-- Response Preview -->
                    <div class="response-preview">
                        <div class="response-preview-header">
                            <div class="response-preview-icon">
                                <i class="fas fa-robot"></i>
                            </div>
                            <div class="response-preview-title">回答预览</div>
                        </div>
                        <div class="response-preview-content">
                            <p>根据您的当前设置，AI 助手将提供<strong>中等详细程度</strong>的回答，会<strong>显示思考过程</strong>，并采用<strong>中度主动</strong>的方式提供信息和建议。</p>
                            <p>回答中将包含<strong>信息来源引用</strong>，并在适当时候<strong>主动提供建议</strong>和<strong>后续问题</strong>。</p>
                        </div>
                    </div>
                </div>
                
                <!-- Knowledge Base Section (Hidden by default) -->
                <div class="settings-section" id="knowledgeSection" style="display: none;">
                    <div class="settings-section-title">
                        <i class="fas fa-database"></i>
                        知识库设置
                    </div>
                    
                    <p class="mb-4">选择 AI 助手可以访问的知识库，以确保回答基于最相关的企业信息。</p>
                    
                    <div class="form-check mb-4">
                        <input class="form-check-input" type="checkbox" id="useKnowledgeBaseCheck" checked>
                        <label class="form-check-label" for="useKnowledgeBaseCheck">
                            启用 RAG (检索增强生成)
                        </label>
                        <div class="form-text">开启后，AI 会从您的企业知识库中检索相关信息来增强回答质量。关闭后，AI 将仅使用其预训练知识。</div>
                    </div>
                    
                    <h5 class="mb-3">可用知识库</h5>
                    
                    <div class="knowledge-item">
                        <div class="knowledge-item-icon">
                            <i class="fas fa-book"></i>
                        </div>
                        <div class="knowledge-item-info">
                            <div class="knowledge-item-title">通用企业知识库</div>
                            <div class="knowledge-item-description">
                                包含公司政策、流程、组织架构和常见问题解答的基础知识库。
                            </div>
                        </div>
                        <div class="knowledge-item-control">
                            <div class="form-check form-switch">
                                <input class="form-check-input" type="checkbox" id="generalKnowledgeCheck" checked>
                            </div>
                        </div>
                    </div>
                    
                    <div class="knowledge-item">
                        <div class="knowledge-item-icon">
                            <i class="fas fa-file-contract"></i>
                        </div>
                        <div class="knowledge-item-info">
                            <div class="knowledge-item-title">合同知识库</div>
                            <div class="knowledge-item-description">
                                包含合同模板、条款解释、法律术语和合同审核标准。
                            </div>
                        </div>
                        <div class="knowledge-item-control">
                            <div class="form-check form-switch">
                                <input class="form-check-input" type="checkbox" id="contractKnowledgeCheck" checked>
                            </div>
                        </div>
                    </div>
                    
                    <div class="knowledge-item">
                        <div class="knowledge-item-icon">
                            <i class="fas fa-chart-pie"></i>
                        </div>
                        <div class="knowledge-item-info">
                            <div class="knowledge-item-title">财务知识库</div>
                            <div class="knowledge-item-description">
                                包含财务报表格式、会计规则、预算规划和财务分析方法。
                            </div>
                        </div>
                        <div class="knowledge-item-control">
                            <div class="form-check form-switch">
                                <input class="form-check-input" type="checkbox" id="financialKnowledgeCheck" checked>
                            </div>
                        </div>
                    </div>
                    
                    <div class="knowledge-item">
                        <div class="knowledge-item-icon">
                            <i class="fas fa-clipboard-list"></i>
                        </div>
                        <div class="knowledge-item-info">
                            <div class="knowledge-item-title">产品知识库</div>
                            <div class="knowledge-item-description">
                                包含产品规格、技术文档、用户手册和常见问题解答。
                            </div>
                        </div>
                        <div class="knowledge-item-control">
                            <div class="form-check form-switch">
                                <input class="form-check-input" type="checkbox" id="productKnowledgeCheck">
                            </div>
                        </div>
                    </div>
                    
                    <div class="knowledge-item">
                        <div class="knowledge-item-icon">
                            <i class="fas fa-users"></i>
                        </div>
                        <div class="knowledge-item-info">
                            <div class="knowledge-item-title">人力资源知识库</div>
                            <div class="knowledge-item-description">
                                包含人力资源政策、员工手册、招聘流程和培训资料。
                            </div>
                        </div>
                        <div class="knowledge-item-control">
                            <div class="form-check form-switch">
                                <input class="form-check-input" type="checkbox" id="hrKnowledgeCheck">
                            </div>
                        </div>
                    </div>
                    
                    <div class="knowledge-item">
                        <div class="knowledge-item-icon">
                            <i class="fas fa-newspaper"></i>
                        </div>
                        <div class="knowledge-item-info">
                            <div class="knowledge-item-title">市场与竞争知识库</div>
                            <div class="knowledge-item-description">
                                包含市场分析报告、竞争对手信息、行业趋势和市场策略。
                            </div>
                        </div>
                        <div class="knowledge-item-control">
                            <div class="form-check form-switch">
                                <input class="form-check-input" type="checkbox" id="marketKnowledgeCheck">
                            </div>
                        </div>
                    </div>
                    
                    <div class="mt-4">
                        <button class="btn btn-outline-primary">
                            <i class="fas fa-plus me-2"></i> 添加自定义知识库
                        </button>
                    </div>
                </div>
                
                <!-- API Connections Section (Hidden by default) -->
                <div class="settings-section" id="connectionsSection" style="display: none;">
                    <div class="settings-section-title">
                        <i class="fas fa-plug"></i>
                        API 连接设置
                    </div>
                    
                    <p class="mb-4">连接外部 API 和服务，扩展 AI 助手的功能和数据访问能力。</p>
                    
                    <!-- Anthropic API -->
                    <div class="api-connection">
                        <div class="api-connection-header">
                            <div class="api-connection-icon">
                                <i class="fas fa-brain fa-lg"></i>
                            </div>
                            <div class="api-connection-info">
                                <div class="api-connection-title">Anthropic API</div>
                                <div class="api-connection-status api-status-connected">
                                    <i class="fas fa-check-circle api-status-icon"></i>
                                    已连接
                                </div>
                            </div>
                            <div class="api-connection-action">
                                <button class="btn btn-sm btn-outline-danger">
                                    断开连接
                                </button>
                            </div>
                        </div>
                        <div class="mb-3">
                            <label for="anthropicApiKey" class="form-label">API 密钥</label>
                            <div class="input-group">
                                <input type="password" class="form-control" id="anthropicApiKey" value="••••••••••••••••••••••••••••••" disabled>
                                <button class="btn btn-outline-secondary" type="button" id="showKeyButton">
                                    <i class="fas fa-eye"></i>
                                </button>
                            </div>
                            <div class="form-text">您的 API 密钥安全加密存储，并用于访问 Anthropic 的 Claude 模型。</div>
                        </div>
                        <div class="form-group">
                            <label for="anthropicRequestsPerMinute" class="form-label">请求速率限制</label>
                            <select class="form-select" id="anthropicRequestsPerMinute">
                                <option>无限制</option>
                                <option selected>20 请求/分钟</option>
                                <option>10 请求/分钟</option>
                                <option>5 请求/分钟</option>
                            </select>
                            <div class="form-text">设置每分钟向 Anthropic API 发送的最大请求数。</div>
                        </div>
                    </div>
                    
                    <!-- Google Drive API -->
                    <div class="api-connection">
                        <div class="api-connection-header">
                            <div class="api-connection-icon">
                                <i class="fab fa-google-drive fa-lg"></i>
                            </div>
                            <div class="api-connection-info">
                                <div class="api-connection-title">Google Drive API</div>
                                <div class="api-connection-status api-status-disconnected">
                                    <i class="fas fa-times-circle api-status-icon"></i>
                                    未连接
                                </div>
                            </div>
                            <div class="api-connection-action">
                                <button class="btn btn-sm btn-outline-primary">
                                    连接
                                </button>
                            </div>
                        </div>
                        <div class="form-text mt-2">连接后，AI 助手将能够访问和分析您 Google Drive 中的文档。</div>
                    </div>
                    
                    <!-- Microsoft OneDrive API -->
                    <div class="api-connection">
                        <div class="api-connection-header">
                            <div class="api-connection-icon">
                                <i class="fab fa-microsoft fa-lg"></i>
                            </div>
                            <div class="api-connection-info">
                                <div class="api-connection-title">Microsoft OneDrive API</div>
                                <div class="api-connection-status api-status-disconnected">
                                    <i class="fas fa-times-circle api-status-icon"></i>
                                    未连接
                                </div>
                            </div>
                            <div class="api-connection-action">
                                <button class="btn btn-sm btn-outline-primary">
                                    连接
                                </button>
                            </div>
                        </div>
                        <div class="form-text mt-2">连接后，AI 助手将能够访问和分析您 OneDrive 中的文档。</div>
                    </div>
                    
                    <!-- Custom API -->
                    <div class="mt-4">
                        <button class="btn btn-outline-primary">
                            <i class="fas fa-plus me-2"></i> 添加自定义 API 连接
                        </button>
                    </div>
                </div>
                
                <!-- Presets Section (Hidden by default) -->
                <div class="settings-section" id="presetsSection" style="display: none;">
                    <div class="settings-section-title">
                        <i class="fas fa-bookmark"></i>
                        预设配置
                    </div>
                    
                    <p class="mb-4">创建和管理 AI 助手的预设配置，以便快速切换不同的工作模式。</p>
                    
                    <!-- Preset Card: Default -->
                    <div class="preset-card">
                        <div class="preset-card-header">
                            <div class="preset-card-title">
                                <i class="fas fa-star preset-card-icon"></i>
                                默认设置
                            </div>
                            <div class="preset-card-actions">
                                <button class="preset-card-action" title="设为默认">
                                    <i class="fas fa-check"></i>
                                </button>
                            </div>
                        </div>
                        <div class="preset-card-body">
                            <div class="preset-settings-item">
                                <div class="preset-settings-label">AI 模型</div>
                                <div class="preset-settings-value">Claude 3.5 Sonnet</div>
                            </div>
                            <div class="preset-settings-item">
                                <div class="preset-settings-label">响应详细程度</div>
                                <div class="preset-settings-value">平衡</div>
                            </div>
                            <div class="preset-settings-item">
                                <div class="preset-settings-label">主动性</div>
                                <div class="preset-settings-value">中度主动</div>
                            </div>
                            <div class="preset-settings-item">
                                <div class="preset-settings-label">知识库</div>
                                <div class="preset-settings-value">通用、合同、财务</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Preset Card: Contract Analysis -->
                    <div class="preset-card">
                        <div class="preset-card-header">
                            <div class="preset-card-title">
                                <i class="fas fa-file-contract preset-card-icon"></i>
                                合同分析
                            </div>
                            <div class="preset-card-actions">
                                <button class="preset-card-action" title="编辑">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="preset-card-action" title="复制">
                                    <i class="fas fa-copy"></i>
                                </button>
                                <button class="preset-card-action" title="删除">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </div>
                        <div class="preset-card-body">
                            <div class="preset-settings-item">
                                <div class="preset-settings-label">AI 模型</div>
                                <div class="preset-settings-value">Claude 3 Opus</div>
                            </div>
                            <div class="preset-settings-item">
                                <div class="preset-settings-label">响应详细程度</div>
                                <div class="preset-settings-value">详细</div>
                            </div>
                            <div class="preset-settings-item">
                                <div class="preset-settings-label">主动性</div>
                                <div class="preset-settings-value">高度主动</div>
                            </div>
                            <div class="preset-settings-item">
                                <div class="preset-settings-label">知识库</div>
                                <div class="preset-settings-value">合同、法律</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Preset Card: Quick Summary -->
                    <div class="preset-card">
                        <div class="preset-card-header">
                            <div class="preset-card-title">
                                <i class="fas fa-bolt preset-card-icon"></i>
                                快速摘要
                            </div>
                            <div class="preset-card-actions">
                                <button class="preset-card-action" title="编辑">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="preset-card-action" title="复制">
                                    <i class="fas fa-copy"></i>
                                </button>
                                <button class="preset-card-action" title="删除">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </div>
                        <div class="preset-card-body">
                            <div class="preset-settings-item">
                                <div class="preset-settings-label">AI 模型</div>
                                <div class="preset-settings-value">Claude 3 Haiku</div>
                            </div>
                            <div class="preset-settings-item">
                                <div class="preset-settings-label">响应详细程度</div>
                                <div class="preset-settings-value">简洁</div>
                            </div>
                            <div class="preset-settings-item">
                                <div class="preset-settings-label">主动性</div>
                                <div class="preset-settings-value">低</div>
                            </div>
                            <div class="preset-settings-item">
                                <div class="preset-settings-label">知识库</div>
                                <div class="preset-settings-value">通用</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mt-4">
                        <button class="btn btn-outline-primary">
                            <i class="fas fa-plus me-2"></i> 创建新预设
                        </button>
                    </div>
                </div>
                
                <!-- Feedback Section (Hidden by default) -->
                <div class="settings-section" id="feedbackSection" style="display: none;">
                    <div class="settings-section-title">
                        <i class="fas fa-sync"></i>
                        反馈与学习
                    </div>
                    
                    <p class="mb-4">设置 AI 助手如何从用户反馈中学习，以持续提高回答质量。</p>
                    
                    <div class="form-check mb-4">
                        <input class="form-check-input" type="checkbox" id="enableLearningCheck" checked>
                        <label class="form-check-label" for="enableLearningCheck">
                            启用持续学习
                        </label>
                        <div class="form-text">允许 AI 助手从用户交互和反馈中学习，逐步改进其回答。</div>
                    </div>
                    
                    <h5 class="mb-3">反馈收集</h5>
                    
                    <div class="feedback-settings">
                        <div class="feedback-option">
                            <div class="feedback-option-control">
                                <input class="form-check-input" type="checkbox" id="thumbsFeedbackCheck" checked>
                            </div>
                            <div class="feedback-option-info">
                                <div class="feedback-option-title">点赞/点踩反馈</div>
                                <div class="feedback-option-description">
                                    在每个 AI 回答后显示简单的点赞/点踩按钮，收集用户对回答质量的基本评价。
                                </div>
                            </div>
                        </div>
                        
                        <div class="feedback-option">
                            <div class="feedback-option-control">
                                <input class="form-check-input" type="checkbox" id="ratingFeedbackCheck" checked>
                            </div>
                            <div class="feedback-option-info">
                                <div class="feedback-option-title">详细评分</div>
                                <div class="feedback-option-description">
                                    收集用户对回答的准确性、相关性、有用性等方面的评分，提供更细致的反馈数据。
                                </div>
                            </div>
                        </div>
                        
                        <div class="feedback-option">
                            <div class="feedback-option-control">
                                <input class="form-check-input" type="checkbox" id="textFeedbackCheck" checked>
                            </div>
                            <div class="feedback-option-info">
                                <div class="feedback-option-title">文本反馈</div>
                                <div class="feedback-option-description">
                                    允许用户提供详细的文字反馈，说明 AI 回答的优点和需要改进的地方。
                                </div>
                            </div>
                        </div>
                        
                        <div class="feedback-option">
                            <div class="feedback-option-control">
                                <input class="form-check-input" type="checkbox" id="correctionsCheck" checked>
                            </div>
                            <div class="feedback-option-info">
                                <div class="feedback-option-title">用户更正</div>
                                <div class="feedback-option-description">
                                    允许用户直接更正 AI 回答中的错误，AI 将从这些更正中学习。
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <h5 class="mb-3">学习频率</h5>
                    
                    <div class="form-group mb-4">
                        <label for="learningFrequency" class="form-label">模型更新频率</label>
                        <select class="form-select" id="learningFrequency">
                            <option>实时学习</option>
                            <option selected>每日更新</option>
                            <option>每周更新</option>
                            <option>每月更新</option>
                            <option>手动更新</option>
                        </select>
                        <div class="form-text">决定 AI 助手多久根据收集的反馈更新一次其行为模式。</div>
                    </div>
                    
                    <div class="form-group mb-4">
                        <label for="feedbackThreshold" class="form-label">反馈阈值</label>
                        <select class="form-select" id="feedbackThreshold">
                            <option>低 (10个反馈)</option>
                            <option selected>中 (50个反馈)</option>
                            <option>高 (100个反馈)</option>
                            <option>非常高 (500个反馈)</option>
                        </select>
                        <div class="form-text">设置在应用学习更新前需要收集的最小反馈数量。</div>
                    </div>
                    
                    <div class="reset-section">
                        <h5 class="mb-3">重置学习</h5>
                        <button class="btn btn-outline-danger">
                            <i class="fas fa-undo me-2"></i> 重置学习模型
                        </button>
                        <div class="form-text mt-2">将 AI 的学习模型重置回默认状态，清除所有通过用户反馈学到的调整。</div>
                    </div>
                </div>
                
                <!-- Save Button -->
                <div class="mt-4 d-flex justify-content-between">
                    <button class="btn btn-outline-secondary">取消</button>
                    <div>
                        <button class="btn btn-outline-primary me-2">恢复默认设置</button>
                        <button class="btn btn-primary">保存设置</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Settings Tabs
        const settingsTabs = document.querySelectorAll('.settings-tab');
        const settingsSections = document.querySelectorAll('.settings-section');
        
        settingsTabs.forEach(tab => {
            tab.addEventListener('click', function() {
                const target = this.getAttribute('data-target');
                
                // Update active tab
                settingsTabs.forEach(t => t.classList.remove('active'));
                this.classList.add('active');
                
                // Show target section, hide others
                settingsSections.forEach(section => {
                    section.style.display = 'none';
                });
                document.getElementById(`${target}Section`).style.display = 'block';
            });
        });
        
        // Model Cards
        const modelCards = document.querySelectorAll('.model-card');
        
        modelCards.forEach(card => {
            card.addEventListener('click', function() {
                // Update selected model
                modelCards.forEach(m => m.classList.remove('active'));
                this.classList.add('active');
                
                // Check the radio button
                this.querySelector('input[type="radio"]').checked = true;
            });
        });
        
        // Show/Hide API Key
        const showKeyButton = document.getElementById('showKeyButton');
        const apiKeyInput = document.getElementById('anthropicApiKey');
        
        if (showKeyButton && apiKeyInput) {
            showKeyButton.addEventListener('click', function() {
                const type = apiKeyInput.getAttribute('type');
                
                if (type === 'password') {
                    apiKeyInput.setAttribute('type', 'text');
                    this.innerHTML = '<i class="fas fa-eye-slash"></i>';
                } else {
                    apiKeyInput.setAttribute('type', 'password');
                    this.innerHTML = '<i class="fas fa-eye"></i>';
                }
            });
        }
        
        // Behavior Sliders
        const detailSlider = document.getElementById('detailSlider');
        const detailValue = document.querySelector('.behavior-slider-value');
        
        if (detailSlider && detailValue) {
            detailSlider.addEventListener('input', function() {
                const value = this.value;
                let label = '';
                
                switch(parseInt(value)) {
                    case 1:
                        label = '非常简洁';
                        break;
                    case 2:
                        label = '简洁';
                        break;
                    case 3:
                        label = '平衡';
                        break;
                    case 4:
                        label = '详细';
                        break;
                    case 5:
                        label = '非常详细';
                        break;
                }
                
                detailValue.textContent = label;
            });
        }
        
        // Token Limit Slider
        const tokenLimitSlider = document.getElementById('tokenLimitSlider');
        const tokenLimitValue = document.querySelector('.token-limit-value');
        
        if (tokenLimitSlider && tokenLimitValue) {
            tokenLimitSlider.addEventListener('input', function() {
                const value = this.value;
                tokenLimitValue.textContent = `${value} tokens`;
            });
        }
        
        // In a real app, we would handle all other sliders similarly
        // And implement save functionality for settings
    });
</script>
{% endblock %}
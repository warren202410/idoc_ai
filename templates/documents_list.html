{% extends "base.html" %}

{% block title %}文档管理 - iDOC{% endblock %}

{% block extra_css %}
<style>
    body {
        background-color: #f5f8fa;
        min-height: 100vh;
        font-family: 'Inter', sans-serif;
    }
    
    .dashboard-layout {
        display: flex;
        min-height: calc(100vh - 1rem);
    }
    
    .sidebar {
        width: 250px;
        background-color: #fff;
        border-right: 1px solid #e5e9f2;
        box-shadow: 0 0 15px rgba(0, 0, 0, 0.05);
        position: fixed;
        height: 100vh;
        z-index: 1000;
    }
    
    .sidebar-brand {
        padding: 1.5rem;
        border-bottom: 1px solid #e5e9f2;
    }
    
    .sidebar-brand a {
        display: flex;
        align-items: center;
        text-decoration: none;
        color: inherit;
    }
    
    .sidebar-brand-icon {
        width: 36px;
        height: 36px;
        display: flex;
        align-items: center;
        justify-content: center;
        margin-right: 0.75rem;
    }
    
    .sidebar-brand-icon img {
        max-width: 100%;
        max-height: 100%;
    }
    
    .sidebar-brand-text {
        display: flex;
        flex-direction: column;
    }
    
    .sidebar-brand-text img {
        height: 20px;
        margin-bottom: 0.25rem;
    }
    
    .sidebar-brand-text span {
        font-size: 0.75rem;
        color: #6c757d;
    }
    
    .sidebar-nav {
        padding: 1.5rem 0;
        overflow-y: auto;
        height: calc(100vh - 85px);
    }
    
    .nav-section {
        padding: 0.75rem 1.5rem;
        font-size: 0.75rem;
        font-weight: 600;
        text-transform: uppercase;
        color: #6c757d;
        margin-top: 0.5rem;
    }
    
    .nav-item {
        padding: 0.75rem 1.5rem;
        display: flex;
        align-items: center;
        color: #495057;
        text-decoration: none;
        transition: all 0.2s ease;
        cursor: pointer;
    }
    
    .nav-item:hover {
        background-color: rgba(74, 108, 247, 0.05);
        color: #4A6CF7;
    }
    
    .nav-item.active {
        background-color: rgba(74, 108, 247, 0.1);
        color: #4A6CF7;
        font-weight: 500;
    }
    
    .nav-item i {
        margin-right: 0.75rem;
        width: 20px;
        text-align: center;
    }
    
    .main-content {
        flex: 1;
        margin-left: 250px;
        padding: 2rem;
    }
    
    .content-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 2rem;
    }
    
    .page-title {
        margin: 0;
        font-weight: 600;
    }
    
    /* Document Manager Specific Styles */
    .docs-toolbar {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 1.5rem;
        flex-wrap: wrap;
        gap: 1rem;
    }
    
    .docs-actions {
        display: flex;
        gap: 0.5rem;
    }
    
    .docs-search {
        position: relative;
        width: 100%;
        max-width: 400px;
    }
    
    .docs-search input {
        padding-left: 2.5rem;
        border-radius: 8px;
        border: 1px solid #dce0e5;
    }
    
    .docs-search i {
        position: absolute;
        left: 1rem;
        top: 50%;
        transform: translateY(-50%);
        color: #6c757d;
    }
    
    .docs-filter {
        display: flex;
        gap: 0.5rem;
        flex-wrap: wrap;
    }
    
    .docs-view-toggle {
        display: flex;
        border: 1px solid #dce0e5;
        border-radius: 6px;
        overflow: hidden;
    }
    
    .docs-view-option {
        padding: 0.375rem 0.75rem;
        background-color: #fff;
        border: none;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.2s ease;
    }
    
    .docs-view-option.active {
        background-color: #4A6CF7;
        color: white;
    }
    
    .docs-view-option:first-child {
        border-right: 1px solid #dce0e5;
    }
    
    .docs-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
        gap: 1.5rem;
    }
    
    .docs-list {
        display: none;
    }
    
    .docs-list.active {
        display: table;
        width: 100%;
    }
    
    .docs-grid.active {
        display: grid;
    }
    
    .docs-grid:not(.active) {
        display: none;
    }
    
    .docs-card {
        background-color: #fff;
        border-radius: 10px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        overflow: hidden;
        transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    
    .docs-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
    }
    
    .docs-card-preview {
        height: 160px;
        background-color: #f8f9fa;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 1rem;
        border-bottom: 1px solid #e5e9f2;
    }
    
    .docs-card-preview i {
        font-size: 3rem;
        color: #adb5bd;
    }
    
    .docs-card-preview img {
        max-width: 100%;
        max-height: 100%;
        object-fit: contain;
    }
    
    .docs-card-body {
        padding: 1rem;
    }
    
    .docs-card-title {
        font-weight: 500;
        margin-bottom: 0.25rem;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
    }
    
    .docs-card-info {
        display: flex;
        justify-content: space-between;
        font-size: 0.75rem;
        color: #6c757d;
        margin-bottom: 0.5rem;
    }
    
    .docs-card-tags {
        display: flex;
        flex-wrap: wrap;
        gap: 0.25rem;
        margin-bottom: 0.5rem;
    }
    
    .docs-card-tag {
        font-size: 0.7rem;
        padding: 0.125rem 0.375rem;
        background-color: #f0f0f0;
        border-radius: 4px;
        color: #495057;
    }
    
    .docs-card-actions {
        display: flex;
        justify-content: space-between;
        align-items: center;
    }
    
    .docs-card-menu {
        cursor: pointer;
        padding: 0.25rem;
        border-radius: 4px;
        transition: background-color 0.2s ease;
    }
    
    .docs-card-menu:hover {
        background-color: #f0f0f0;
    }
    
    .docs-table {
        width: 100%;
        background-color: #fff;
        border-radius: 10px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        overflow: hidden;
    }
    
    .docs-table thead {
        background-color: #f8f9fa;
    }
    
    .docs-table th {
        padding: 1rem;
        font-weight: 600;
        border-bottom: 1px solid #e5e9f2;
    }
    
    .docs-table td {
        padding: 1rem;
        border-bottom: 1px solid #e5e9f2;
        vertical-align: middle;
    }
    
    .docs-table tr:last-child td {
        border-bottom: none;
    }
    
    .docs-table-title {
        display: flex;
        align-items: center;
    }
    
    .docs-table-icon {
        width: 36px;
        height: 36px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 6px;
        background-color: #f0f0f0;
        margin-right: 0.75rem;
    }
    
    .docs-table-icon i {
        font-size: 1.25rem;
        color: #6c757d;
    }
    
    .docs-table-menu {
        cursor: pointer;
        padding: 0.25rem;
        border-radius: 4px;
        transition: background-color 0.2s ease;
    }
    
    .docs-table-menu:hover {
        background-color: #f0f0f0;
    }
    
    /* Upload Document Styles */
    .upload-container {
        background-color: #fff;
        border-radius: 10px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        padding: 2rem;
    }
    
    .upload-area {
        border: 2px dashed #dce0e5;
        border-radius: 10px;
        padding: 3rem 2rem;
        text-align: center;
        margin-bottom: 2rem;
        transition: all 0.2s ease;
        cursor: pointer;
    }
    
    .upload-area.active {
        border-color: #4A6CF7;
        background-color: rgba(74, 108, 247, 0.05);
    }
    
    .upload-icon {
        font-size: 3rem;
        color: #adb5bd;
        margin-bottom: 1rem;
    }
    
    .upload-text {
        font-size: 1.25rem;
        font-weight: 500;
        margin-bottom: 0.5rem;
    }
    
    .upload-hint {
        color: #6c757d;
        margin-bottom: 1.5rem;
    }
    
    .upload-file-list {
        max-height: 300px;
        overflow-y: auto;
    }
    
    .upload-file-item {
        display: flex;
        align-items: center;
        padding: 0.75rem;
        background-color: #f8f9fa;
        border-radius: 6px;
        margin-bottom: 0.5rem;
    }
    
    .upload-file-icon {
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 6px;
        background-color: #e9ecef;
        margin-right: 0.75rem;
    }
    
    .upload-file-icon i {
        font-size: 1.25rem;
        color: #6c757d;
    }
    
    .upload-file-info {
        flex: 1;
    }
    
    .upload-file-name {
        font-weight: 500;
        margin-bottom: 0.25rem;
    }
    
    .upload-file-size {
        font-size: 0.75rem;
        color: #6c757d;
    }
    
    .upload-file-progress {
        flex: 1;
        height: 6px;
        background-color: #e9ecef;
        border-radius: 3px;
        overflow: hidden;
        margin: 0 1rem;
    }
    
    .upload-file-progress-bar {
        height: 100%;
        background-color: #4A6CF7;
        border-radius: 3px;
    }
    
    .upload-file-actions {
        display: flex;
        gap: 0.5rem;
    }

    /* Tag styles for documents */
    .tag-pdf {
        background-color: #dc3545;
        color: white;
    }
    
    .tag-docx {
        background-color: #007bff;
        color: white;
    }
    
    .tag-xlsx {
        background-color: #28a745;
        color: white;
    }
    
    .tag-pptx {
        background-color: #fd7e14;
        color: white;
    }
    
    .tag-txt {
        background-color: #6c757d;
        color: white;
    }
    
    .tag-shared {
        background-color: #6610f2;
        color: white;
    }
    
    .tag-archived {
        background-color: #6c757d;
        color: white;
    }
    
    .tag-favorite {
        background-color: #ffc107;
        color: #212529;
    }
    
    /* Folder styles */
    .folder-card {
        background-color: #fff;
        border-radius: 10px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        overflow: hidden;
        transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    
    .folder-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
    }
    
    .folder-card-header {
        padding: 1.25rem;
        background-color: #f8f9fa;
        border-bottom: 1px solid #e5e9f2;
        display: flex;
        align-items: center;
    }
    
    .folder-card-icon {
        width: 48px;
        height: 48px;
        border-radius: 8px;
        background-color: #ffd43b;
        color: #495057;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.5rem;
        margin-right: 1rem;
    }
    
    .folder-card-title {
        font-weight: 600;
        font-size: 1.1rem;
    }
    
    .folder-card-body {
        padding: 1.25rem;
    }
    
    .folder-stats {
        display: flex;
        justify-content: space-between;
        padding: 0.75rem 0;
        border-bottom: 1px solid #e5e9f2;
        margin-bottom: 1rem;
    }
    
    .folder-stat {
        text-align: center;
    }
    
    .folder-stat-value {
        font-weight: 600;
        font-size: 1.1rem;
    }
    
    .folder-stat-label {
        font-size: 0.75rem;
        color: #6c757d;
    }
    
    .folder-description {
        color: #6c757d;
        margin-bottom: 1rem;
        font-size: 0.9rem;
    }
    
    @media (max-width: 992px) {
        .main-content {
            margin-left: 64px;
        }
    }
</style>
{% endblock %}

{% block content %}
<div class="dashboard-layout">
    <!-- Sidebar -->
    <div class="sidebar">
        <div class="sidebar-brand">
            <a href="{{ url_for('dashboard') }}">
                <div class="sidebar-brand-icon">
                    <img src="{{ url_for('static', filename='img/logo-icon.svg') }}" alt="Logo Icon" onerror="this.src='{{ url_for('static', filename='img/default-logo.png') }}'">
                </div>
                <div class="sidebar-brand-text">
                    <img src="{{ url_for('static', filename='img/logo-text.svg') }}" alt="Logo Text" onerror="this.src='{{ url_for('static', filename='img/default-logo-text.png') }}'">
                    <span>iDOC</span>
                </div>
            </a>
        </div>
        
        <div class="sidebar-nav">
            <a href="{{ url_for('dashboard') }}" class="nav-item">
                <i class="fas fa-tachometer-alt"></i>
                <span>仪表板</span>
            </a>
            
            <div class="nav-item" data-bs-toggle="collapse" data-bs-target="#collapseKnowledgeBase" aria-expanded="false">
                <i class="fas fa-book"></i>
                <span>企业知识库</span>
                <i class="fas fa-chevron-down ms-auto"></i>
            </div>
            <div class="collapse" id="collapseKnowledgeBase">
                <a href="{{ url_for('knowledge_base') }}" class="nav-item ms-4 py-2">
                    <i class="fas fa-folder-open"></i>
                    <span>所有知识库</span>
                </a>
                <a href="{{ url_for('knowledge_base') }}?action=import" class="nav-item ms-4 py-2">
                    <i class="fas fa-cloud-upload-alt"></i>
                    <span>导入知识</span>
                </a>
                <a href="{{ url_for('knowledge_base') }}?action=settings" class="nav-item ms-4 py-2">
                    <i class="fas fa-cogs"></i>
                    <span>知识库设置</span>
                </a>
            </div>
            
            <div class="nav-item" data-bs-toggle="collapse" data-bs-target="#collapseDocuments" aria-expanded="true">
                <i class="fas fa-file-alt"></i>
                <span>文档管理</span>
                <i class="fas fa-chevron-down ms-auto"></i>
            </div>
            <div class="collapse show" id="collapseDocuments">
                {% if request.args.get('action') == 'upload' %}
                <a href="{{ url_for('documents_list') }}?action=upload" class="nav-item ms-4 py-2 active">
                    <i class="fas fa-file-upload"></i>
                    <span>上传文档</span>
                </a>
                {% else %}
                <a href="{{ url_for('documents_list') }}?action=upload" class="nav-item ms-4 py-2">
                    <i class="fas fa-file-upload"></i>
                    <span>上传文档</span>
                </a>
                {% endif %}
                
                {% if not request.args.get('filter') and not request.args.get('action') %}
                <a href="{{ url_for('documents_list') }}" class="nav-item ms-4 py-2 active">
                    <i class="fas fa-folder"></i>
                    <span>我的文档</span>
                </a>
                {% else %}
                <a href="{{ url_for('documents_list') }}" class="nav-item ms-4 py-2">
                    <i class="fas fa-folder"></i>
                    <span>我的文档</span>
                </a>
                {% endif %}
                
                {% if request.args.get('filter') == 'shared' %}
                <a href="{{ url_for('documents_list') }}?filter=shared" class="nav-item ms-4 py-2 active">
                    <i class="fas fa-share-alt"></i>
                    <span>共享文档</span>
                </a>
                {% else %}
                <a href="{{ url_for('documents_list') }}?filter=shared" class="nav-item ms-4 py-2">
                    <i class="fas fa-share-alt"></i>
                    <span>共享文档</span>
                </a>
                {% endif %}
                
                {% if request.args.get('filter') == 'archived' %}
                <a href="{{ url_for('documents_list') }}?filter=archived" class="nav-item ms-4 py-2 active">
                    <i class="fas fa-archive"></i>
                    <span>归档文档</span>
                </a>
                {% else %}
                <a href="{{ url_for('documents_list') }}?filter=archived" class="nav-item ms-4 py-2">
                    <i class="fas fa-archive"></i>
                    <span>归档文档</span>
                </a>
                {% endif %}
            </div>
            
            <div class="nav-section">智能工具</div>
            
            <div class="nav-item" data-bs-toggle="collapse" data-bs-target="#collapseWorkflows" aria-expanded="false">
                <i class="fas fa-project-diagram"></i>
                <span>文档解析工作流</span>
                <i class="fas fa-chevron-down ms-auto"></i>
            </div>
            <div class="collapse" id="collapseWorkflows">
                <a href="{{ url_for('workflow_create') }}?action=list" class="nav-item ms-4 py-2">
                    <i class="fas fa-list"></i>
                    <span>工作流列表</span>
                </a>
                <a href="{{ url_for('workflow_create') }}" class="nav-item ms-4 py-2">
                    <i class="fas fa-plus-circle"></i>
                    <span>创建工作流</span>
                </a>
                <a href="{{ url_for('workflow_create') }}?action=history" class="nav-item ms-4 py-2">
                    <i class="fas fa-history"></i>
                    <span>执行历史</span>
                </a>
                <a href="{{ url_for('workflow_create') }}?action=templates" class="nav-item ms-4 py-2">
                    <i class="fas fa-puzzle-piece"></i>
                    <span>模板市场</span>
                </a>
            </div>
            
            <div class="nav-item" data-bs-toggle="collapse" data-bs-target="#collapseAnalysis" aria-expanded="false">
                <i class="fas fa-chart-line"></i>
                <span>AI分析</span>
                <i class="fas fa-chevron-down ms-auto"></i>
            </div>
            <div class="collapse" id="collapseAnalysis">
                <a href="{{ url_for('ai_analysis') }}?type=contract" class="nav-item ms-4 py-2">
                    <i class="fas fa-file-contract"></i>
                    <span>合同分析</span>
                </a>
                <a href="{{ url_for('ai_analysis') }}?type=finance" class="nav-item ms-4 py-2">
                    <i class="fas fa-file-invoice-dollar"></i>
                    <span>财务文档分析</span>
                </a>
                <a href="{{ url_for('ai_analysis') }}?type=medical" class="nav-item ms-4 py-2">
                    <i class="fas fa-file-medical"></i>
                    <span>医疗文档分析</span>
                </a>
                <a href="{{ url_for('ai_analysis') }}" class="nav-item ms-4 py-2">
                    <i class="fas fa-file-alt"></i>
                    <span>通用文档分析</span>
                </a>
            </div>
            
            <div class="nav-item" data-bs-toggle="collapse" data-bs-target="#collapseAgentChat" aria-expanded="false">
                <i class="fas fa-robot"></i>
                <span>Agent Chat</span>
                <i class="fas fa-chevron-down ms-auto"></i>
            </div>
            <div class="collapse" id="collapseAgentChat">
                <a href="{{ url_for('agent_chat') }}" class="nav-item ms-4 py-2">
                    <i class="fas fa-comments"></i>
                    <span>新会话</span>
                </a>
                <a href="{{ url_for('agent_chat') }}?view=history" class="nav-item ms-4 py-2">
                    <i class="fas fa-history"></i>
                    <span>会话历史</span>
                </a>
                <a href="{{ url_for('agent_settings') }}" class="nav-item ms-4 py-2">
                    <i class="fas fa-tools"></i>
                    <span>Agent设置</span>
                </a>
            </div>
            
            <div class="nav-section">设置</div>
            <div class="nav-item" data-bs-toggle="collapse" data-bs-target="#collapseSettings" aria-expanded="false">
                <i class="fas fa-user-cog"></i>
                <span>账户</span>
                <i class="fas fa-chevron-down ms-auto"></i>
            </div>
            <div class="collapse" id="collapseSettings">
                <a href="{{ url_for('account_settings') }}" class="nav-item ms-4 py-2">
                    <i class="fas fa-user"></i>
                    <span>个人资料</span>
                </a>
                <a href="{{ url_for('account_settings') }}?tab=security" class="nav-item ms-4 py-2">
                    <i class="fas fa-shield-alt"></i>
                    <span>安全设置</span>
                </a>
                <a href="{{ url_for('notifications') }}" class="nav-item ms-4 py-2">
                    <i class="fas fa-bell"></i>
                    <span>通知中心</span>
                </a>
            </div>
            
            <a href="{{ url_for('notifications') }}" class="nav-item">
                <i class="fas fa-bell"></i>
                <span>通知中心</span>
            </a>
            <a href="{{ url_for('logout') }}" class="nav-item">
                <i class="fas fa-sign-out-alt"></i>
                <span>退出登录</span>
            </a>
        </div>
    </div>
    
    <!-- Main Content -->
    <div class="main-content">
        {% if request.args.get('action') == 'upload' %}
        <!-- Upload Documents View -->
        <div class="content-header">
            <div>
                <h1 class="page-title">上传文档</h1>
                <p class="text-muted">上传文档到您的资料库，支持多种格式</p>
            </div>
        </div>
        
        <div class="upload-container">
            <div class="upload-area" id="uploadArea">
                <div class="upload-icon">
                    <i class="fas fa-cloud-upload-alt"></i>
                </div>
                <h3 class="upload-text">拖放文件到此处</h3>
                <p class="upload-hint">支持 PDF、DOCX、XLSX、PPT、TXT 等格式</p>
                <button class="btn btn-primary">
                    <i class="fas fa-folder-open me-2"></i> 选择文件
                </button>
                <input type="file" id="fileInput" multiple style="display: none;">
            </div>
            
            <div class="mb-4">
                <h5 class="mb-3">上传选项</h5>
                <div class="row">
                    <div class="col-md-6">
                        <div class="mb-3">
                            <label for="folderSelect" class="form-label">上传到文件夹</label>
                            <select class="form-select" id="folderSelect">
                                <option value="root">根目录</option>
                                <option value="reports">报表</option>
                                <option value="contracts">合同</option>
                                <option value="invoices">发票</option>
                                <option value="presentations">演示文稿</option>
                            </select>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="mb-3">
                            <label for="tagInput" class="form-label">标签</label>
                            <input type="text" class="form-control" id="tagInput" placeholder="输入标签，用逗号分隔">
                            <div class="form-text">例如：季度报表,财务,2025</div>
                        </div>
                    </div>
                </div>
                
                <div class="form-check mb-3">
                    <input class="form-check-input" type="checkbox" id="autoProcess" checked>
                    <label class="form-check-label" for="autoProcess">
                        自动处理文档（OCR、文本提取）
                    </label>
                </div>
                
                <div class="form-check mb-3">
                    <input class="form-check-input" type="checkbox" id="addToKnowledgeBase">
                    <label class="form-check-label" for="addToKnowledgeBase">
                        添加到知识库
                    </label>
                </div>
                
                <div class="form-check mb-3">
                    <input class="form-check-input" type="checkbox" id="shareWithTeam">
                    <label class="form-check-label" for="shareWithTeam">
                        共享给团队成员
                    </label>
                </div>
            </div>
            
            <div class="upload-file-list" id="fileList">
                <!-- Files will be added here dynamically -->
            </div>
            
            <div class="d-flex justify-content-between mt-4">
                <button class="btn btn-outline-secondary" onclick="window.location='{{ url_for('documents_list') }}'">
                    <i class="fas fa-arrow-left me-2"></i> 返回
                </button>
                <button class="btn btn-primary" id="uploadBtn" disabled>
                    <i class="fas fa-upload me-2"></i> 开始上传
                </button>
            </div>
        </div>
        
        {% elif request.args.get('filter') == 'shared' %}
        <!-- Shared Documents View -->
        <div class="content-header">
            <div>
                <h1 class="page-title">共享文档</h1>
                <p class="text-muted">查看其他用户共享给您的文档</p>
            </div>
            <div>
                <button class="btn btn-outline-primary me-2">
                    <i class="fas fa-filter me-1"></i> 筛选
                </button>
                <button class="btn btn-primary" onclick="window.location='{{ url_for('documents_list') }}?action=upload'">
                    <i class="fas fa-upload me-1"></i> 上传
                </button>
            </div>
        </div>
        
        <div class="docs-toolbar">
            <div class="docs-search">
                <i class="fas fa-search"></i>
                <input type="text" class="form-control" placeholder="搜索共享文档...">
            </div>
            
            <div class="docs-filter">
                <select class="form-select">
                    <option>所有文件类型</option>
                    <option>PDF</option>
                    <option>Word</option>
                    <option>Excel</option>
                    <option>PowerPoint</option>
                    <option>文本</option>
                </select>
                
                <select class="form-select">
                    <option>共享者</option>
                    <option>张三</option>
                    <option>李四</option>
                    <option>王五</option>
                </select>
                
                <div class="docs-view-toggle">
                    <button class="docs-view-option active" data-view="grid">
                        <i class="fas fa-th"></i>
                    </button>
                    <button class="docs-view-option" data-view="list">
                        <i class="fas fa-list"></i>
                    </button>
                </div>
            </div>
        </div>
        
        <div class="docs-grid active" id="docsGrid">
            <div class="folder-card">
                <div class="folder-card-header">
                    <div class="folder-card-icon">
                        <i class="fas fa-folder"></i>
                    </div>
                    <div class="folder-card-title">市场部共享</div>
                </div>
                <div class="folder-card-body">
                    <div class="folder-stats">
                        <div class="folder-stat">
                            <div class="folder-stat-value">14</div>
                            <div class="folder-stat-label">文件</div>
                        </div>
                        <div class="folder-stat">
                            <div class="folder-stat-value">3</div>
                            <div class="folder-stat-label">共享者</div>
                        </div>
                        <div class="folder-stat">
                            <div class="folder-stat-value">5月20日</div>
                            <div class="folder-stat-label">最近更新</div>
                        </div>
                    </div>
                    <div class="d-flex justify-content-end">
                        <button class="btn btn-sm btn-outline-primary">
                            <i class="fas fa-arrow-right"></i> 打开
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="folder-card">
                <div class="folder-card-header">
                    <div class="folder-card-icon">
                        <i class="fas fa-folder"></i>
                    </div>
                    <div class="folder-card-title">财务报表</div>
                </div>
                <div class="folder-card-body">
                    <div class="folder-stats">
                        <div class="folder-stat">
                            <div class="folder-stat-value">28</div>
                            <div class="folder-stat-label">文件</div>
                        </div>
                        <div class="folder-stat">
                            <div class="folder-stat-value">5</div>
                            <div class="folder-stat-label">共享者</div>
                        </div>
                        <div class="folder-stat">
                            <div class="folder-stat-value">5月15日</div>
                            <div class="folder-stat-label">最近更新</div>
                        </div>
                    </div>
                    <div class="d-flex justify-content-end">
                        <button class="btn btn-sm btn-outline-primary">
                            <i class="fas fa-arrow-right"></i> 打开
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="docs-card">
                <div class="docs-card-preview">
                    <i class="far fa-file-pdf"></i>
                </div>
                <div class="docs-card-body">
                    <div class="docs-card-title">2025年Q1市场分析报告.pdf</div>
                    <div class="docs-card-info">
                        <span>共享者: 张三</span>
                        <span>5月18日</span>
                    </div>
                    <div class="docs-card-tags">
                        <span class="docs-card-tag tag-pdf">PDF</span>
                        <span class="docs-card-tag tag-shared">共享</span>
                        <span class="docs-card-tag">市场</span>
                        <span class="docs-card-tag">报告</span>
                    </div>
                    <div class="docs-card-actions">
                        <button class="btn btn-sm btn-outline-primary">
                            <i class="fas fa-eye"></i>
                        </button>
                        <div class="docs-card-menu">
                            <i class="fas fa-ellipsis-v"></i>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="docs-card">
                <div class="docs-card-preview">
                    <i class="far fa-file-excel"></i>
                </div>
                <div class="docs-card-body">
                    <div class="docs-card-title">销售预测数据2025.xlsx</div>
                    <div class="docs-card-info">
                        <span>共享者: 李四</span>
                        <span>5月16日</span>
                    </div>
                    <div class="docs-card-tags">
                        <span class="docs-card-tag tag-xlsx">XLSX</span>
                        <span class="docs-card-tag tag-shared">共享</span>
                        <span class="docs-card-tag">销售</span>
                        <span class="docs-card-tag">预测</span>
                    </div>
                    <div class="docs-card-actions">
                        <button class="btn btn-sm btn-outline-primary">
                            <i class="fas fa-eye"></i>
                        </button>
                        <div class="docs-card-menu">
                            <i class="fas fa-ellipsis-v"></i>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="docs-card">
                <div class="docs-card-preview">
                    <i class="far fa-file-powerpoint"></i>
                </div>
                <div class="docs-card-body">
                    <div class="docs-card-title">新产品发布会演示.pptx</div>
                    <div class="docs-card-info">
                        <span>共享者: 王五</span>
                        <span>5月14日</span>
                    </div>
                    <div class="docs-card-tags">
                        <span class="docs-card-tag tag-pptx">PPTX</span>
                        <span class="docs-card-tag tag-shared">共享</span>
                        <span class="docs-card-tag">产品</span>
                        <span class="docs-card-tag">演示</span>
                    </div>
                    <div class="docs-card-actions">
                        <button class="btn btn-sm btn-outline-primary">
                            <i class="fas fa-eye"></i>
                        </button>
                        <div class="docs-card-menu">
                            <i class="fas fa-ellipsis-v"></i>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="docs-card">
                <div class="docs-card-preview">
                    <i class="far fa-file-word"></i>
                </div>
                <div class="docs-card-body">
                    <div class="docs-card-title">客户反馈总结报告.docx</div>
                    <div class="docs-card-info">
                        <span>共享者: 赵六</span>
                        <span>5月12日</span>
                    </div>
                    <div class="docs-card-tags">
                        <span class="docs-card-tag tag-docx">DOCX</span>
                        <span class="docs-card-tag tag-shared">共享</span>
                        <span class="docs-card-tag">客户</span>
                        <span class="docs-card-tag">反馈</span>
                    </div>
                    <div class="docs-card-actions">
                        <button class="btn btn-sm btn-outline-primary">
                            <i class="fas fa-eye"></i>
                        </button>
                        <div class="docs-card-menu">
                            <i class="fas fa-ellipsis-v"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="docs-list" id="docsList">
            <table class="docs-table">
                <thead>
                    <tr>
                        <th style="width: 40%">文件名</th>
                        <th>类型</th>
                        <th>共享者</th>
                        <th>共享日期</th>
                        <th>操作</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>
                            <div class="docs-table-title">
                                <div class="docs-table-icon">
                                    <i class="far fa-file-pdf"></i>
                                </div>
                                <div>2025年Q1市场分析报告.pdf</div>
                            </div>
                        </td>
                        <td><span class="badge bg-danger">PDF</span></td>
                        <td>张三</td>
                        <td>2025/05/18</td>
                        <td>
                            <button class="btn btn-sm btn-outline-primary me-1">
                                <i class="fas fa-eye"></i>
                            </button>
                            <div class="docs-table-menu d-inline-block">
                                <i class="fas fa-ellipsis-v"></i>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <div class="docs-table-title">
                                <div class="docs-table-icon">
                                    <i class="far fa-file-excel"></i>
                                </div>
                                <div>销售预测数据2025.xlsx</div>
                            </div>
                        </td>
                        <td><span class="badge bg-success">XLSX</span></td>
                        <td>李四</td>
                        <td>2025/05/16</td>
                        <td>
                            <button class="btn btn-sm btn-outline-primary me-1">
                                <i class="fas fa-eye"></i>
                            </button>
                            <div class="docs-table-menu d-inline-block">
                                <i class="fas fa-ellipsis-v"></i>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <div class="docs-table-title">
                                <div class="docs-table-icon">
                                    <i class="far fa-file-powerpoint"></i>
                                </div>
                                <div>新产品发布会演示.pptx</div>
                            </div>
                        </td>
                        <td><span class="badge bg-warning text-dark">PPTX</span></td>
                        <td>王五</td>
                        <td>2025/05/14</td>
                        <td>
                            <button class="btn btn-sm btn-outline-primary me-1">
                                <i class="fas fa-eye"></i>
                            </button>
                            <div class="docs-table-menu d-inline-block">
                                <i class="fas fa-ellipsis-v"></i>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <div class="docs-table-title">
                                <div class="docs-table-icon">
                                    <i class="far fa-file-word"></i>
                                </div>
                                <div>客户反馈总结报告.docx</div>
                            </div>
                        </td>
                        <td><span class="badge bg-primary">DOCX</span></td>
                        <td>赵六</td>
                        <td>2025/05/12</td>
                        <td>
                            <button class="btn btn-sm btn-outline-primary me-1">
                                <i class="fas fa-eye"></i>
                            </button>
                            <div class="docs-table-menu d-inline-block">
                                <i class="fas fa-ellipsis-v"></i>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        
        <div class="d-flex justify-content-between align-items-center mt-4">
            <div>
                显示 1-10 / 24 项
            </div>
            <nav aria-label="Page navigation">
                <ul class="pagination">
                    <li class="page-item disabled">
                        <a class="page-link" href="#" aria-label="Previous">
                            <span aria-hidden="true">&laquo;</span>
                        </a>
                    </li>
                    <li class="page-item active"><a class="page-link" href="#">1</a></li>
                    <li class="page-item"><a class="page-link" href="#">2</a></li>
                    <li class="page-item"><a class="page-link" href="#">3</a></li>
                    <li class="page-item">
                        <a class="page-link" href="#" aria-label="Next">
                            <span aria-hidden="true">&raquo;</span>
                        </a>
                    </li>
                </ul>
            </nav>
        </div>
        
        {% elif request.args.get('filter') == 'archived' %}
        <!-- Archived Documents View -->
        <div class="content-header">
            <div>
                <h1 class="page-title">归档文档</h1>
                <p class="text-muted">查看和管理已归档的文档</p>
            </div>
            <div>
                <button class="btn btn-outline-primary me-2">
                    <i class="fas fa-filter me-1"></i> 筛选
                </button>
                <button class="btn btn-primary" onclick="window.location='{{ url_for('documents_list') }}?action=upload'">
                    <i class="fas fa-upload me-1"></i> 上传
                </button>
            </div>
        </div>
        
        <div class="docs-toolbar">
            <div class="docs-search">
                <i class="fas fa-search"></i>
                <input type="text" class="form-control" placeholder="搜索归档文档...">
            </div>
            
            <div class="docs-filter">
                <select class="form-select">
                    <option>所有文件类型</option>
                    <option>PDF</option>
                    <option>Word</option>
                    <option>Excel</option>
                    <option>PowerPoint</option>
                    <option>文本</option>
                </select>
                
                <select class="form-select">
                    <option>最近归档时间</option>
                    <option>本周</option>
                    <option>本月</option>
                    <option>今年</option>
                </select>
                
                <div class="docs-view-toggle">
                    <button class="docs-view-option active" data-view="grid">
                        <i class="fas fa-th"></i>
                    </button>
                    <button class="docs-view-option" data-view="list">
                        <i class="fas fa-list"></i>
                    </button>
                </div>
            </div>
        </div>
        
        <div class="alert alert-info">
            <i class="fas fa-info-circle me-2"></i>
            归档文档将在系统中保留3个月。3个月后，它们将被自动删除。如需保留更长时间，请取消归档。
        </div>
        
        <div class="docs-grid active" id="docsGrid">
            <div class="docs-card">
                <div class="docs-card-preview">
                    <i class="far fa-file-pdf"></i>
                </div>
                <div class="docs-card-body">
                    <div class="docs-card-title">2024年Q4财务报告.pdf</div>
                    <div class="docs-card-info">
                        <span>归档于: 5月10日</span>
                        <span>3.2MB</span>
                    </div>
                    <div class="docs-card-tags">
                        <span class="docs-card-tag tag-pdf">PDF</span>
                        <span class="docs-card-tag tag-archived">归档</span>
                        <span class="docs-card-tag">财务</span>
                        <span class="docs-card-tag">2024</span>
                    </div>
                    <div class="docs-card-actions">
                        <button class="btn btn-sm btn-outline-success">
                            <i class="fas fa-undo-alt"></i> 恢复
                        </button>
                        <div class="docs-card-menu">
                            <i class="fas fa-ellipsis-v"></i>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="docs-card">
                <div class="docs-card-preview">
                    <i class="far fa-file-word"></i>
                </div>
                <div class="docs-card-body">
                    <div class="docs-card-title">客户满意度调查2024.docx</div>
                    <div class="docs-card-info">
                        <span>归档于: 5月5日</span>
                        <span>1.8MB</span>
                    </div>
                    <div class="docs-card-tags">
                        <span class="docs-card-tag tag-docx">DOCX</span>
                        <span class="docs-card-tag tag-archived">归档</span>
                        <span class="docs-card-tag">客户</span>
                        <span class="docs-card-tag">调查</span>
                    </div>
                    <div class="docs-card-actions">
                        <button class="btn btn-sm btn-outline-success">
                            <i class="fas fa-undo-alt"></i> 恢复
                        </button>
                        <div class="docs-card-menu">
                            <i class="fas fa-ellipsis-v"></i>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="docs-card">
                <div class="docs-card-preview">
                    <i class="far fa-file-excel"></i>
                </div>
                <div class="docs-card-body">
                    <div class="docs-card-title">2024年度人力资源预算.xlsx</div>
                    <div class="docs-card-info">
                        <span>归档于: 4月28日</span>
                        <span>2.5MB</span>
                    </div>
                    <div class="docs-card-tags">
                        <span class="docs-card-tag tag-xlsx">XLSX</span>
                        <span class="docs-card-tag tag-archived">归档</span>
                        <span class="docs-card-tag">人力资源</span>
                        <span class="docs-card-tag">预算</span>
                    </div>
                    <div class="docs-card-actions">
                        <button class="btn btn-sm btn-outline-success">
                            <i class="fas fa-undo-alt"></i> 恢复
                        </button>
                        <div class="docs-card-menu">
                            <i class="fas fa-ellipsis-v"></i>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="docs-card">
                <div class="docs-card-preview">
                    <i class="far fa-file-powerpoint"></i>
                </div>
                <div class="docs-card-body">
                    <div class="docs-card-title">2024年度总结会议.pptx</div>
                    <div class="docs-card-info">
                        <span>归档于: 4月20日</span>
                        <span>4.7MB</span>
                    </div>
                    <div class="docs-card-tags">
                        <span class="docs-card-tag tag-pptx">PPTX</span>
                        <span class="docs-card-tag tag-archived">归档</span>
                        <span class="docs-card-tag">会议</span>
                        <span class="docs-card-tag">总结</span>
                    </div>
                    <div class="docs-card-actions">
                        <button class="btn btn-sm btn-outline-success">
                            <i class="fas fa-undo-alt"></i> 恢复
                        </button>
                        <div class="docs-card-menu">
                            <i class="fas fa-ellipsis-v"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="docs-list" id="docsList">
            <table class="docs-table">
                <thead>
                    <tr>
                        <th style="width: 40%">文件名</th>
                        <th>类型</th>
                        <th>大小</th>
                        <th>归档日期</th>
                        <th>操作</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>
                            <div class="docs-table-title">
                                <div class="docs-table-icon">
                                    <i class="far fa-file-pdf"></i>
                                </div>
                                <div>2024年Q4财务报告.pdf</div>
                            </div>
                        </td>
                        <td><span class="badge bg-danger">PDF</span></td>
                        <td>3.2MB</td>
                        <td>2025/05/10</td>
                        <td>
                            <button class="btn btn-sm btn-outline-success me-1">
                                <i class="fas fa-undo-alt"></i> 恢复
                            </button>
                            <div class="docs-table-menu d-inline-block">
                                <i class="fas fa-ellipsis-v"></i>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <div class="docs-table-title">
                                <div class="docs-table-icon">
                                    <i class="far fa-file-word"></i>
                                </div>
                                <div>客户满意度调查2024.docx</div>
                            </div>
                        </td>
                        <td><span class="badge bg-primary">DOCX</span></td>
                        <td>1.8MB</td>
                        <td>2025/05/05</td>
                        <td>
                            <button class="btn btn-sm btn-outline-success me-1">
                                <i class="fas fa-undo-alt"></i> 恢复
                            </button>
                            <div class="docs-table-menu d-inline-block">
                                <i class="fas fa-ellipsis-v"></i>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <div class="docs-table-title">
                                <div class="docs-table-icon">
                                    <i class="far fa-file-excel"></i>
                                </div>
                                <div>2024年度人力资源预算.xlsx</div>
                            </div>
                        </td>
                        <td><span class="badge bg-success">XLSX</span></td>
                        <td>2.5MB</td>
                        <td>2025/04/28</td>
                        <td>
                            <button class="btn btn-sm btn-outline-success me-1">
                                <i class="fas fa-undo-alt"></i> 恢复
                            </button>
                            <div class="docs-table-menu d-inline-block">
                                <i class="fas fa-ellipsis-v"></i>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <div class="docs-table-title">
                                <div class="docs-table-icon">
                                    <i class="far fa-file-powerpoint"></i>
                                </div>
                                <div>2024年度总结会议.pptx</div>
                            </div>
                        </td>
                        <td><span class="badge bg-warning text-dark">PPTX</span></td>
                        <td>4.7MB</td>
                        <td>2025/04/20</td>
                        <td>
                            <button class="btn btn-sm btn-outline-success me-1">
                                <i class="fas fa-undo-alt"></i> 恢复
                            </button>
                            <div class="docs-table-menu d-inline-block">
                                <i class="fas fa-ellipsis-v"></i>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        
        <div class="d-flex justify-content-between align-items-center mt-4">
            <div>
                显示 1-10 / 18 项
            </div>
            <nav aria-label="Page navigation">
                <ul class="pagination">
                    <li class="page-item disabled">
                        <a class="page-link" href="#" aria-label="Previous">
                            <span aria-hidden="true">&laquo;</span>
                        </a>
                    </li>
                    <li class="page-item active"><a class="page-link" href="#">1</a></li>
                    <li class="page-item"><a class="page-link" href="#">2</a></li>
                    <li class="page-item">
                        <a class="page-link" href="#" aria-label="Next">
                            <span aria-hidden="true">&raquo;</span>
                        </a>
                    </li>
                </ul>
            </nav>
        </div>
        
        {% else %}
        <!-- My Documents View (default) -->
        <div class="content-header">
            <div>
                <h1 class="page-title">我的文档</h1>
                <p class="text-muted">管理您的文档库</p>
            </div>
            <div>
                <button class="btn btn-outline-primary me-2">
                    <i class="fas fa-filter me-1"></i> 筛选
                </button>
                <button class="btn btn-primary" onclick="window.location='{{ url_for('documents_list') }}?action=upload'">
                    <i class="fas fa-upload me-1"></i> 上传
                </button>
            </div>
        </div>
        
        <div class="docs-toolbar">
            <div class="docs-search">
                <i class="fas fa-search"></i>
                <input type="text" class="form-control" placeholder="搜索文档...">
            </div>
            
            <div class="docs-filter">
                <select class="form-select">
                    <option>所有文件类型</option>
                    <option>PDF</option>
                    <option>Word</option>
                    <option>Excel</option>
                    <option>PowerPoint</option>
                    <option>文本</option>
                </select>
                
                <select class="form-select">
                    <option>最近修改</option>
                    <option>名称 A-Z</option>
                    <option>名称 Z-A</option>
                    <option>大小 (升序)</option>
                    <option>大小 (降序)</option>
                </select>
                
                <div class="docs-view-toggle">
                    <button class="docs-view-option active" data-view="grid">
                        <i class="fas fa-th"></i>
                    </button>
                    <button class="docs-view-option" data-view="list">
                        <i class="fas fa-list"></i>
                    </button>
                </div>
            </div>
        </div>
        
        <div class="docs-grid active" id="docsGrid">
            <div class="folder-card">
                <div class="folder-card-header">
                    <div class="folder-card-icon">
                        <i class="fas fa-folder"></i>
                    </div>
                    <div class="folder-card-title">项目文档</div>
                </div>
                <div class="folder-card-body">
                    <div class="folder-stats">
                        <div class="folder-stat">
                            <div class="folder-stat-value">32</div>
                            <div class="folder-stat-label">文件</div>
                        </div>
                        <div class="folder-stat">
                            <div class="folder-stat-value">5</div>
                            <div class="folder-stat-label">子文件夹</div>
                        </div>
                        <div class="folder-stat">
                            <div class="folder-stat-value">昨天</div>
                            <div class="folder-stat-label">最近更新</div>
                        </div>
                    </div>
                    <div class="d-flex justify-content-end">
                        <button class="btn btn-sm btn-outline-primary">
                            <i class="fas fa-arrow-right"></i> 打开
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="folder-card">
                <div class="folder-card-header">
                    <div class="folder-card-icon">
                        <i class="fas fa-folder"></i>
                    </div>
                    <div class="folder-card-title">财务文档</div>
                </div>
                <div class="folder-card-body">
                    <div class="folder-stats">
                        <div class="folder-stat">
                            <div class="folder-stat-value">47</div>
                            <div class="folder-stat-label">文件</div>
                        </div>
                        <div class="folder-stat">
                            <div class="folder-stat-value">3</div>
                            <div class="folder-stat-label">子文件夹</div>
                        </div>
                        <div class="folder-stat">
                            <div class="folder-stat-value">3天前</div>
                            <div class="folder-stat-label">最近更新</div>
                        </div>
                    </div>
                    <div class="d-flex justify-content-end">
                        <button class="btn btn-sm btn-outline-primary">
                            <i class="fas fa-arrow-right"></i> 打开
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="docs-card">
                <div class="docs-card-preview">
                    <i class="far fa-file-pdf"></i>
                </div>
                <div class="docs-card-body">
                    <div class="docs-card-title">2025年Q2业务计划.pdf</div>
                    <div class="docs-card-info">
                        <span>修改于: 今天</span>
                        <span>2.7MB</span>
                    </div>
                    <div class="docs-card-tags">
                        <span class="docs-card-tag tag-pdf">PDF</span>
                        <span class="docs-card-tag tag-favorite">收藏</span>
                        <span class="docs-card-tag">业务</span>
                        <span class="docs-card-tag">计划</span>
                    </div>
                    <div class="docs-card-actions">
                        <button class="btn btn-sm btn-outline-primary">
                            <i class="fas fa-eye"></i>
                        </button>
                        <div class="docs-card-menu">
                            <i class="fas fa-ellipsis-v"></i>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="docs-card">
                <div class="docs-card-preview">
                    <i class="far fa-file-word"></i>
                </div>
                <div class="docs-card-body">
                    <div class="docs-card-title">客户合同模板.docx</div>
                    <div class="docs-card-info">
                        <span>修改于: 昨天</span>
                        <span>1.4MB</span>
                    </div>
                    <div class="docs-card-tags">
                        <span class="docs-card-tag tag-docx">DOCX</span>
                        <span class="docs-card-tag">合同</span>
                        <span class="docs-card-tag">模板</span>
                    </div>
                    <div class="docs-card-actions">
                        <button class="btn btn-sm btn-outline-primary">
                            <i class="fas fa-eye"></i>
                        </button>
                        <div class="docs-card-menu">
                            <i class="fas fa-ellipsis-v"></i>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="docs-card">
                <div class="docs-card-preview">
                    <i class="far fa-file-excel"></i>
                </div>
                <div class="docs-card-body">
                    <div class="docs-card-title">季度销售数据分析.xlsx</div>
                    <div class="docs-card-info">
                        <span>修改于: 2天前</span>
                        <span>3.1MB</span>
                    </div>
                    <div class="docs-card-tags">
                        <span class="docs-card-tag tag-xlsx">XLSX</span>
                        <span class="docs-card-tag">销售</span>
                        <span class="docs-card-tag">分析</span>
                    </div>
                    <div class="docs-card-actions">
                        <button class="btn btn-sm btn-outline-primary">
                            <i class="fas fa-eye"></i>
                        </button>
                        <div class="docs-card-menu">
                            <i class="fas fa-ellipsis-v"></i>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="docs-card">
                <div class="docs-card-preview">
                    <i class="far fa-file-powerpoint"></i>
                </div>
                <div class="docs-card-body">
                    <div class="docs-card-title">市场策略汇报.pptx</div>
                    <div class="docs-card-info">
                        <span>修改于: 3天前</span>
                        <span>5.8MB</span>
                    </div>
                    <div class="docs-card-tags">
                        <span class="docs-card-tag tag-pptx">PPTX</span>
                        <span class="docs-card-tag">市场</span>
                        <span class="docs-card-tag">策略</span>
                    </div>
                    <div class="docs-card-actions">
                        <button class="btn btn-sm btn-outline-primary">
                            <i class="fas fa-eye"></i>
                        </button>
                        <div class="docs-card-menu">
                            <i class="fas fa-ellipsis-v"></i>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="docs-card">
                <div class="docs-card-preview">
                    <i class="far fa-file-alt"></i>
                </div>
                <div class="docs-card-body">
                    <div class="docs-card-title">会议记录.txt</div>
                    <div class="docs-card-info">
                        <span>修改于: 4天前</span>
                        <span>12KB</span>
                    </div>
                    <div class="docs-card-tags">
                        <span class="docs-card-tag tag-txt">TXT</span>
                        <span class="docs-card-tag">会议</span>
                        <span class="docs-card-tag">记录</span>
                    </div>
                    <div class="docs-card-actions">
                        <button class="btn btn-sm btn-outline-primary">
                            <i class="fas fa-eye"></i>
                        </button>
                        <div class="docs-card-menu">
                            <i class="fas fa-ellipsis-v"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="docs-list" id="docsList">
            <table class="docs-table">
                <thead>
                    <tr>
                        <th style="width: 40%">文件名</th>
                        <th>类型</th>
                        <th>大小</th>
                        <th>修改日期</th>
                        <th>操作</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>
                            <div class="docs-table-title">
                                <div class="docs-table-icon">
                                    <i class="far fa-file-pdf"></i>
                                </div>
                                <div>2025年Q2业务计划.pdf</div>
                            </div>
                        </td>
                        <td><span class="badge bg-danger">PDF</span></td>
                        <td>2.7MB</td>
                        <td>今天</td>
                        <td>
                            <button class="btn btn-sm btn-outline-primary me-1">
                                <i class="fas fa-eye"></i>
                            </button>
                            <div class="docs-table-menu d-inline-block">
                                <i class="fas fa-ellipsis-v"></i>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <div class="docs-table-title">
                                <div class="docs-table-icon">
                                    <i class="far fa-file-word"></i>
                                </div>
                                <div>客户合同模板.docx</div>
                            </div>
                        </td>
                        <td><span class="badge bg-primary">DOCX</span></td>
                        <td>1.4MB</td>
                        <td>昨天</td>
                        <td>
                            <button class="btn btn-sm btn-outline-primary me-1">
                                <i class="fas fa-eye"></i>
                            </button>
                            <div class="docs-table-menu d-inline-block">
                                <i class="fas fa-ellipsis-v"></i>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <div class="docs-table-title">
                                <div class="docs-table-icon">
                                    <i class="far fa-file-excel"></i>
                                </div>
                                <div>季度销售数据分析.xlsx</div>
                            </div>
                        </td>
                        <td><span class="badge bg-success">XLSX</span></td>
                        <td>3.1MB</td>
                        <td>2天前</td>
                        <td>
                            <button class="btn btn-sm btn-outline-primary me-1">
                                <i class="fas fa-eye"></i>
                            </button>
                            <div class="docs-table-menu d-inline-block">
                                <i class="fas fa-ellipsis-v"></i>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <div class="docs-table-title">
                                <div class="docs-table-icon">
                                    <i class="far fa-file-powerpoint"></i>
                                </div>
                                <div>市场策略汇报.pptx</div>
                            </div>
                        </td>
                        <td><span class="badge bg-warning text-dark">PPTX</span></td>
                        <td>5.8MB</td>
                        <td>3天前</td>
                        <td>
                            <button class="btn btn-sm btn-outline-primary me-1">
                                <i class="fas fa-eye"></i>
                            </button>
                            <div class="docs-table-menu d-inline-block">
                                <i class="fas fa-ellipsis-v"></i>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <div class="docs-table-title">
                                <div class="docs-table-icon">
                                    <i class="far fa-file-alt"></i>
                                </div>
                                <div>会议记录.txt</div>
                            </div>
                        </td>
                        <td><span class="badge bg-secondary">TXT</span></td>
                        <td>12KB</td>
                        <td>4天前</td>
                        <td>
                            <button class="btn btn-sm btn-outline-primary me-1">
                                <i class="fas fa-eye"></i>
                            </button>
                            <div class="docs-table-menu d-inline-block">
                                <i class="fas fa-ellipsis-v"></i>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        
        <div class="d-flex justify-content-between align-items-center mt-4">
            <div>
                显示 1-10 / 42 项
            </div>
            <nav aria-label="Page navigation">
                <ul class="pagination">
                    <li class="page-item disabled">
                        <a class="page-link" href="#" aria-label="Previous">
                            <span aria-hidden="true">&laquo;</span>
                        </a>
                    </li>
                    <li class="page-item active"><a class="page-link" href="#">1</a></li>
                    <li class="page-item"><a class="page-link" href="#">2</a></li>
                    <li class="page-item"><a class="page-link" href="#">3</a></li>
                    <li class="page-item"><a class="page-link" href="#">4</a></li>
                    <li class="page-item"><a class="page-link" href="#">5</a></li>
                    <li class="page-item">
                        <a class="page-link" href="#" aria-label="Next">
                            <span aria-hidden="true">&raquo;</span>
                        </a>
                    </li>
                </ul>
            </nav>
        </div>
        {% endif %}
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        // View toggle functionality
        const viewOptions = document.querySelectorAll('.docs-view-option');
        const docsGrid = document.getElementById('docsGrid');
        const docsList = document.getElementById('docsList');
        
        if (viewOptions.length > 0) {
            viewOptions.forEach(option => {
                option.addEventListener('click', function() {
                    // Remove active class from all options
                    viewOptions.forEach(opt => opt.classList.remove('active'));
                    // Add active class to clicked option
                    this.classList.add('active');
                    
                    // Switch view based on data-view attribute
                    const viewType = this.getAttribute('data-view');
                    if (viewType === 'grid') {
                        docsGrid.classList.add('active');
                        docsList.classList.remove('active');
                    } else if (viewType === 'list') {
                        docsGrid.classList.remove('active');
                        docsList.classList.add('active');
                    }
                });
            });
        }
        
        // Upload area functionality
        const uploadArea = document.getElementById('uploadArea');
        const fileInput = document.getElementById('fileInput');
        const fileList = document.getElementById('fileList');
        const uploadBtn = document.getElementById('uploadBtn');
        
        if (uploadArea && fileInput) {
            uploadArea.addEventListener('click', function() {
                fileInput.click();
            });
            
            fileInput.addEventListener('change', function() {
                handleFiles(this.files);
            });
            
            ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
                uploadArea.addEventListener(eventName, preventDefaults, false);
            });
            
            function preventDefaults(e) {
                e.preventDefault();
                e.stopPropagation();
            }
            
            ['dragenter', 'dragover'].forEach(eventName => {
                uploadArea.addEventListener(eventName, highlight, false);
            });
            
            ['dragleave', 'drop'].forEach(eventName => {
                uploadArea.addEventListener(eventName, unhighlight, false);
            });
            
            function highlight() {
                uploadArea.classList.add('active');
            }
            
            function unhighlight() {
                uploadArea.classList.remove('active');
            }
            
            uploadArea.addEventListener('drop', handleDrop, false);
            
            function handleDrop(e) {
                const dt = e.dataTransfer;
                const files = dt.files;
                handleFiles(files);
            }
            
            function handleFiles(files) {
                if (files.length > 0) {
                    uploadBtn.disabled = false;
                    
                    // Clear file list
                    fileList.innerHTML = '';
                    
                    // Add files to the list
                    for (let i = 0; i < files.length; i++) {
                        const file = files[i];
                        const fileItem = document.createElement('div');
                        fileItem.className = 'upload-file-item';
                        
                        // Determine file icon based on type
                        let fileIcon = 'fas fa-file';
                        if (file.type.includes('pdf')) {
                            fileIcon = 'far fa-file-pdf';
                        } else if (file.type.includes('word') || file.name.endsWith('.docx') || file.name.endsWith('.doc')) {
                            fileIcon = 'far fa-file-word';
                        } else if (file.type.includes('excel') || file.name.endsWith('.xlsx') || file.name.endsWith('.xls')) {
                            fileIcon = 'far fa-file-excel';
                        } else if (file.type.includes('powerpoint') || file.name.endsWith('.pptx') || file.name.endsWith('.ppt')) {
                            fileIcon = 'far fa-file-powerpoint';
                        } else if (file.type.includes('text')) {
                            fileIcon = 'far fa-file-alt';
                        }
                        
                        fileItem.innerHTML = `
                            <div class="upload-file-icon">
                                <i class="${fileIcon}"></i>
                            </div>
                            <div class="upload-file-info">
                                <div class="upload-file-name">${file.name}</div>
                                <div class="upload-file-size">${formatFileSize(file.size)}</div>
                            </div>
                            <div class="upload-file-progress">
                                <div class="upload-file-progress-bar" style="width: 0%"></div>
                            </div>
                            <div class="upload-file-actions">
                                <button class="btn btn-sm btn-outline-danger">
                                    <i class="fas fa-times"></i>
                                </button>
                            </div>
                        `;
                        
                        fileList.appendChild(fileItem);
                        
                        // Add remove functionality
                        const removeBtn = fileItem.querySelector('.btn-outline-danger');
                        removeBtn.addEventListener('click', function() {
                            fileItem.remove();
                            if (fileList.children.length === 0) {
                                uploadBtn.disabled = true;
                            }
                        });
                    }
                }
            }
            
            function formatFileSize(bytes) {
                if (bytes === 0) return '0 Bytes';
                const k = 1024;
                const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB'];
                const i = Math.floor(Math.log(bytes) / Math.log(k));
                return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
            }
            
            // Upload button functionality
            uploadBtn.addEventListener('click', function() {
                const progressBars = document.querySelectorAll('.upload-file-progress-bar');
                
                progressBars.forEach(bar => {
                    let width = 0;
                    const interval = setInterval(function() {
                        if (width >= 100) {
                            clearInterval(interval);
                        } else {
                            width += 5;
                            bar.style.width = width + '%';
                        }
                    }, 100);
                });
                
                // Simulate upload complete after 2 seconds
                setTimeout(function() {
                    alert('上传完成！文件已成功添加到您的文档库。');
                    window.location.href = '{{ url_for('documents_list') }}';
                }, 2000);
            });
        }
    });
</script>
{% endblock %}